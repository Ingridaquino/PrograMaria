function updateItemQuantity(e){var t=e.id.replace("js-item-quantity-",""),n=e.value,i={item:{id:t,quantity:n}},r=document.location.origin+"/cart/update_item_quantity",s=$.ajax({method:"PATCH",url:r,data:i});s.success(function(e){$("#js-item-total-"+t).text(e.item_total),$("#js-order-total").text(e.order_total),$("#js-order-installments").text(e.order_installments)}),s.error(function(e){console.log("Something wrong with item quantity update: "),console.log(e)})}function toggleItemQuantity(e){var t=e.id.replace("js-item-cnpj-",""),n=$("#js-item-quantity-"+t),i=n.parent().find("span").hide();n.toggle(e.checked),i.toggle(e.checked)}function getCurrentTime(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}!function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&e.data("remote")!==!1},handleRemote:function(i){var r,s,o,a,l,u;if(n.fire(i,"ajax:before")){if(a=i.data("with-credentials")||null,l=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.data("ujs:submit-button-formmethod")||i.attr("method"),s=i.data("ujs:submit-button-formaction")||i.attr("action"),o=e(i[0]).serializeArray();var d=i.data("ujs:submit-button");d&&(o.push(d),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(n.inputChangeSelector)?(r=i.data("method"),s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(r=i.data("method"),s=n.href(i),o=i.data("params")||null);return u={type:r||"GET",data:o,dataType:l,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])?void i.trigger("ajax:send",e):!1},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(s)},a&&(u.xhrFields={withCredentials:a}),s&&(u.url=s),n.ajax(u)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),s=i.data("method"),o=i.attr("target"),a=n.csrfToken(),l=n.csrfParam(),u=e('<form method="post" action="'+r+'"></form>'),d='<input name="_method" value="'+s+'" type="hidden" />';l===t||a===t||n.isCrossDomain(r)||(d+='<input name="'+l+'" value="'+a+'" type="hidden" />'),o&&u.attr("target",o),u.hide().append(d).appendTo("body"),u.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",i=e.data("disable-with"),i!==t&&(e.data("ujs:enable-with",e[n]()),e[n](i)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var n=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[n](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,i=e.data("confirm"),r=!1;if(!i)return!0;if(n.fire(e,"confirm")){try{r=n.confirm(i)}catch(s){(console.error||console.log).call(console,s.stack||s)}t=n.fire(e,"confirm:complete",[r])}return r&&t},blankInputs:function(t,n,i){var r,s,o,a,l=e(),u=n||"input,textarea",d=t.find(u),c={};return d.each(function(){r=e(this),r.is("input[type=radio]")?(a=r.attr("name"),c[a]||(0===t.find('input[type=radio]:checked[name="'+a+'"]').length&&(o=t.find('input[type=radio][name="'+a+'"]'),l=l.add(o)),c[a]=a)):(s=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val(),s===i&&(l=l.add(r)))}),l.length?l:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");i!==t&&(e.data("ujs:enable-with",e.html()),e.html(i)),e.bind("click.railsDisable",function(e){return n.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)})}),i.on("ajax:complete",n.linkDisableSelector,function(){n.enableElement(e(this))}),i.on("ajax:complete",n.buttonDisableSelector,function(){n.enableFormElement(e(this))}),i.on("click.rails",n.linkClickSelector,function(t){var i=e(this),r=i.data("method"),s=i.data("params"),o=t.metaKey||t.ctrlKey;if(!n.allowAction(i))return n.stopEverything(t);if(!o&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(o&&(!r||"GET"===r)&&!s)return!0;var a=n.handleRemote(i);return a===!1?n.enableElement(i):a.fail(function(){n.enableElement(i)}),!1}return r?(n.handleMethod(i),!1):void 0}),i.on("click.rails",n.buttonClickSelector,function(t){var i=e(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.on("change.rails",n.inputChangeSelector,function(t){var i=e(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.on("submit.rails",n.formSubmitSelector,function(i){var r,s,o=e(this),a=n.isRemote(o);if(!n.allowAction(o))return n.stopEverything(i);if(o.attr("novalidate")===t)if(o.data("ujs:formnovalidate-button")===t){if(r=n.blankInputs(o,n.requiredInputSelector,!1),r&&n.fire(o,"ajax:aborted:required",[r]))return n.stopEverything(i)}else o.data("ujs:formnovalidate-button",t);if(a){if(s=n.nonBlankInputs(o,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[s]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),i.on("click.rails",n.formInputClickSelector,function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),s=r?{name:r,value:i.val()}:null,o=i.closest("form");0===o.length&&(o=e("#"+i.attr("form"))),o.data("ujs:submit-button",s),o.data("ujs:formnovalidate-button",i.attr("formnovalidate")),o.data("ujs:submit-button-formaction",i.attr("formaction")),o.data("ujs:submit-button-formmethod",i.attr("formmethod"))}),i.on("ajax:send.rails",n.formSubmitSelector,function(t){this===t.target&&n.disableFormElements(e(this))}),i.on("ajax:complete.rails",n.formSubmitSelector,function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),function(){var e,t,n,i,r,s,o,a,l,u,d,c,h,p,f,m,v,y,g,b,w,S,k,T,P,_,C,x,E,I,j,A,L,O,$,z,R,D,N,F,V,M,H,Q,q,U,B,G,W,J,K,Y,X,Z,ee,te,ne,ie,re,se,oe,ae,le,ue,de,ce,he,pe=[].slice,fe=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},me=function(e,t){function n(){this.constructor=e}for(var i in t)ve.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},ve={}.hasOwnProperty,ye=function(e,t){return function(){return e.apply(t,arguments)}};N={},h=10,re=!1,ee=!0,Q=null,q=400,g=null,$=null,B=null,he=null,i={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",PARTIAL_LOAD:"page:partial-load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",AFTER_REMOVE:"page:after-remove"},O=function(e){return e.change||e.append||e.prepend},T=function(e,t){var i;return null==t&&(t={}),e=new n(e),F(e.absolute)?void 0:e.crossOrigin()?void(document.location.href=e.absolute):(O(t)||t.keep?Y():c(),K(),null!=Q&&Q.start({delay:q}),re&&!O(t)&&(i=se(e.absolute))?(G(e),P(i),t.showProgressBar=!1,t.scroll=!1):O(t)&&!e.hash&&null==t.scroll&&(t.scroll=!1),_(e,t))},se=function(e){var t;if(e!==g.url)return t=N[e],t&&!t.transitionCacheDisabled?t:void 0},w=function(e){return null==e&&(e=!0),re=e},b=function(e){return null==e&&(e=!0),ee=!e,e},_=function(e,t){return null==t.cacheRequest&&(t.cacheRequest=ee),null==t.showProgressBar&&(t.showProgressBar=!0),oe(i.FETCH,{url:e.absolute}),null!=he&&he.abort(),he=new XMLHttpRequest,he.open("GET",e.formatForXHR({cache:t.cacheRequest}),!0),he.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),he.setRequestHeader("X-XHR-Referer",B),he.onload=function(){var n,r;return oe(i.RECEIVE,{url:e.absolute}),(n=H())?(G(e),W(),r=p.apply(null,pe.call(k(n)).concat([t])),t.showProgressBar&&null!=Q&&Q.done(),ue(t.scroll),oe(O(t)?i.PARTIAL_LOAD:i.LOAD,r),m(h)):(null!=Q&&Q.done(),document.location.href=y()||e.absolute)},Q&&t.showProgressBar&&(he.onprogress=function(e){return function(e){var t;return t=e.lengthComputable?e.loaded/e.total*100:Q.value+(100-Q.value)/10,Q.advanceTo(t)}}(this)),he.onloadend=function(){return he=null},he.onerror=function(){return document.location.href=e.absolute},he.send()},P=function(e,t){return null==t&&(t={}),null!=he&&he.abort(),p(e.title,e.body,null,{runScripts:!1}),null!=Q&&Q.done(),ue(t.scroll),oe(i.RESTORE)},c=function(){var e;return e=new n(g.url),N[e.absolute]={url:e.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")}},Y=function(){return delete N[new n(g.url).absolute]},V=function(e){return null==e&&(e=h),/^[\d]+$/.test(e)?h=parseInt(e):void 0},m=function(e){var t,n,i,r,s,o;for(s=Object.keys(N),t=s.map(function(e){return N[e].cachedAt}).sort(function(e,t){return t-e}),o=[],n=0,r=s.length;r>n;n++)i=s[n],N[i].cachedAt<=t[e]&&(D(N[i].body),o.push(delete N[i]));return o},Z=function(e,t){var n;return null==t&&(t={}),n=p.apply(null,pe.call(k(v(e))).concat([t])),oe(O(t)?i.PARTIAL_LOAD:i.LOAD,n)},p=function(t,n,r,s){var o,a,l,u,d,c,h,p,f,m,v;return t=null!=(m=s.title)?m:t,l=document.body,O(s)?(s.append&&(u=x(l,s.append)),s.prepend&&(h=x(l,s.prepend)),p=C(l,"[data-turbolinks-temporary]"),s.change&&(p=p.concat(x(l,s.change))),d=[].concat(u||[],h||[],p||[]),d=X(d)):d=[l],oe(i.BEFORE_UNLOAD,d),t!==!1&&(document.title=t),O(s)?(u&&(o=ie(n,u,{keep:!1,append:!0})),h&&(f=ie(n,h,{keep:!1,prepend:!0})),p&&(v=ie(n,p,{keep:!1})),a=[].concat(o||[],f||[],v||[]),a=X(a)):(s.flush||(c=C(l,"[data-turbolinks-permanent]"),s.keep&&c.push.apply(c,x(l,s.keep)),ie(n,X(c),{keep:!0})),document.body=n,null!=r&&e.update(r),ne(),a=[n]),S(E(a,s.runScripts)),g=window.history.state,oe(i.CHANGE,a),oe(i.UPDATE),a},C=function(e,t){return Array.prototype.slice.apply(e.querySelectorAll(t))},x=function(e,t){var n,i,r,s,o;for(s=[],o=Array.isArray(t)?t:[t],n=0,r=o.length;r>n;n++)i=o[n],s.push.apply(s,C(e,'[id^="'+i+':"], [id="'+i+'"]'));return s},ie=function(e,t,n){var i,r,s,o,a,l,u,d,c,h,p;for(i=[],l=0,d=t.length;d>l;l++){if(o=t[l],!(h=o.getAttribute("id")))throw new Error("Turbolinks partial replace: turbolinks elements must have an id.");if(p=e.querySelector('[id="'+h+'"]'))if(n.keep)o.parentNode.insertBefore(o.cloneNode(!0),o),o=p.ownerDocument.adoptNode(o),p.parentNode.replaceChild(o,p);else if(n.append||n.prepend){for(a=o.firstChild,s=Array.prototype.slice.call(p.childNodes,0),u=0,c=s.length;c>u;u++)r=s[u],!a||n.append?o.appendChild(r):n.prepend&&o.insertBefore(r,a);i.push(o)}else o.parentNode.replaceChild(p,o),D(o),i.push(p)}return i},D=function(e){return"undefined"!=typeof jQuery&&jQuery(e).remove(),oe(i.AFTER_REMOVE,e)},E=function(e,t){var n,i,r,s,o,a;for(a=t===!1?'script[data-turbolinks-eval="always"]':'script:not([data-turbolinks-eval="false"])',r=document.body.querySelectorAll(a),s=[],n=0,i=r.length;i>n;n++)o=r[n],(L(o)||z(e,o)&&!ce(o))&&s.push(o);return s},L=function(e){return"always"===e.getAttribute("data-turbolinks-eval")},ce=function(e){for(;null!=e;){if("function"==typeof e.hasAttribute?e.hasAttribute("data-turbolinks-permanent"):void 0)return!0;e=e.parentNode}return!1},z=function(e,t){for(;null!=t;){if(fe.call(e,t)>=0)return!0;t=t.parentNode}return!1},S=function(e){var t,n,i,r,s,o,a,l,u,d,c;for(i=0,s=e.length;s>i;i++)if(c=e[i],""===(u=c.type)||"text/javascript"===u){for(n=document.createElement("script"),d=c.attributes,r=0,o=d.length;o>r;r++)t=d[r],n.setAttribute(t.name,t.value);c.hasAttribute("async")||(n.async=!1),n.appendChild(document.createTextNode(c.innerHTML)),l=c.parentNode,a=c.nextSibling,l.removeChild(c),l.insertBefore(n,a)}},ne=function(){var e,t;return e=(t=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[t.length-1],e&&document.activeElement!==e?e.focus():void 0},G=function(e){var t;return(t=(e=new n(e)).absolute)!==B&&t!==document.location.href?window.history.pushState({turbolinks:!0,url:e.absolute},"",e.absolute):void 0},W=function(){var e,t;return(e=he.getResponseHeader("X-XHR-Redirected-To"))?(e=new n(e),t=e.hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",e.href+t)):void 0},y=function(){var e;return null!=(e=he.getResponseHeader("Location"))&&new n(e).crossOrigin()?e:void 0},K=function(){return B=document.location.href},J=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href),g=window.history.state},ue=function(e){return Array.isArray(e)?window.scrollTo(e[0],e[1]):e!==!1?document.location.hash?(document.location.href=document.location.href,J()):window.scrollTo(0,0):void 0},f=function(e){var t,n,i;if(null==e||"object"!=typeof e)return e;t=new e.constructor;for(n in e)i=e[n],t[n]=f(i);return t},X=function(e){var t,n,i,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],-1===r.indexOf(i)&&r.push(i);return r},M=function(e){var t,n;return n=(null!=(t=document.cookie.match(new RegExp(e+"=(\\w+)")))?t[1].toUpperCase():void 0)||"",document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},le=function(){return(new Date).getTime().toString(36)},oe=function(e,t){var n;return"undefined"!=typeof Prototype&&Event.fire(document,e,t,!0),n=document.createEvent("Events"),t&&(n.data=t),n.initEvent(e,!0,!0),document.dispatchEvent(n)},F=function(e){return!oe(i.BEFORE_CHANGE,{url:e})},H=function(){var e,t,n,i,r,s,o;return t=function(){var e;return 400<=(e=he.status)&&600>e},o=function(){var e;return null!=(e=he.getResponseHeader("Content-Type"))&&e.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},i=function(){var e;return null!=(e=he.getResponseHeader("Content-Disposition"))&&e.match(/^attachment/)},r=function(e){var t,n,i,r,s;for(r=e.querySelector("head").childNodes,s=[],t=0,n=r.length;n>t;t++)i=r[t],null!=("function"==typeof i.getAttribute?i.getAttribute("data-turbolinks-track"):void 0)&&s.push(i.getAttribute("src")||i.getAttribute("href"));return s},e=function(e){var t;return $||($=r(document)),t=r(e),t.length!==$.length||s(t,$).length!==$.length},s=function(e,t){var n,i,r,s,o;for(e.length>t.length&&(r=[t,e],e=r[0],t=r[1]),s=[],n=0,i=e.length;i>n;n++)o=e[n],fe.call(t,o)>=0&&s.push(o);return s},t()||!o()||i()||(n=v(he.responseText),!n||e(n))?void 0:n},k=function(t){var n;return n=t.querySelector("title"),[null!=n?n.textContent:void 0,t.querySelector("body"),e.get(t).token]},e={get:function(e){var t;return null==e&&(e=document),{node:t=e.querySelector('meta[name="csrf-token"]'),token:null!=t&&"function"==typeof t.getAttribute?t.getAttribute("content"):void 0}},update:function(e){var t;return t=this.get(),null!=t.token&&null!=e&&t.token!==e?t.node.setAttribute("content",e):void 0}},v=function(e){var t;return/<(html|body)/i.test(e)?(t=document.documentElement.cloneNode(),t.innerHTML=e):(t=document.documentElement.cloneNode(!0),t.querySelector("body").innerHTML=e),t.head=t.querySelector("head"),t.body=t.querySelector("body"),t},n=function(){function e(t){return this.original=null!=t?t:document.location.href,this.original.constructor===e?this.original:void this._parse()}return e.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},e.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},e.prototype.hasNoHash=function(){return 0===this.hash.length},e.prototype.crossOrigin=function(){return this.origin!==(new e).origin},e.prototype.formatForXHR=function(e){return null==e&&(e={}),(e.cache?this:this.withAntiCacheParam()).withoutHashForIE10compatibility()},e.prototype.withAntiCacheParam=function(){return new e(/([?&])_=[^&]*/.test(this.absolute)?this.absolute.replace(/([?&])_=[^&]*/,"$1_="+le()):new e(this.absolute+(/\?/.test(this.absolute)?"&":"?")+("_="+le())))},e.prototype._parse=function(){var e;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,e=this.link,this.href=e.href,this.protocol=e.protocol,this.host=e.host,this.hostname=e.hostname,this.port=e.port,this.pathname=e.pathname,this.search=e.search,this.hash=e.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},e}(),r=function(e){function t(e){return this.link=e,this.link.constructor===t?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void t.__super__.constructor.apply(this,arguments))}return me(t,e),t.HTML_EXTENSIONS=["html"],t.allowExtensions=function(){var e,n,i,r;for(n=1<=arguments.length?pe.call(arguments,0):[],i=0,r=n.length;r>i;i++)e=n[i],t.HTML_EXTENSIONS.push(e);return t.HTML_EXTENSIONS},t.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},t.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},t.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+t.HTML_EXTENSIONS.join("|")+")?$","g"))},t.prototype._optOut=function(){var e,t;for(t=this.originalElement;!e&&t!==document;)e=null!=t.getAttribute("data-no-turbolink"),t=t.parentNode;return e},t.prototype._target=function(){return 0!==this.link.target.length},t}(n),t=function(){function e(e){this.event=e,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(de(this.link.href),this.event.preventDefault()))}return e.installHandlerLast=function(t){return t.defaultPrevented?void 0:(document.removeEventListener("click",e.handle,!1),document.addEventListener("click",e.handle,!1))},e.handle=function(t){return new e(t)},e.prototype._extractLink=function(){var e;for(e=this.event.target;e.parentNode&&"A"!==e.nodeName;)e=e.parentNode;return"A"===e.nodeName&&0!==e.href.length?this.link=new r(e):void 0},e.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},e.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},e}(),s=function(){function e(e){this.elementSelector=e,this._trickle=ye(this._trickle,this),this._reset=ye(this._reset,this),this.value=0,this.content="",this.speed=300,this.opacity=n,this.install()}var t,n;return t="turbolinks-progress-bar",n=.99,e.enable=function(){return null!=Q?Q:Q=new e("html")},e.disable=function(){return null!=Q&&Q.uninstall(),Q=null},e.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(t),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},e.prototype.uninstall=function(){return this.element.classList.remove(t),document.head.removeChild(this.styleElement)},e.prototype.start=function(e){var t;return t=(null!=e?e:{}).delay,clearTimeout(this.displayTimeout),t?(this.display=!1,this.displayTimeout=setTimeout(function(e){return function(){return e.display=!0}}(this),t)):this.display=!0,this.value>0&&(this._reset(),this._reflow()),this.advanceTo(5)},e.prototype.advanceTo=function(e){var t;if(e>(t=this.value)&&100>=t){if(this.value=e,this._updateStyle(),100===this.value)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},e.prototype.done=function(){return this.value>0?(this.advanceTo(100),this._finish()):void 0},e.prototype._finish=function(){return this.fadeTimer=setTimeout(function(e){return function(){return e.opacity=0,e._updateStyle()}}(this),this.speed/2),this.resetTimer=setTimeout(this._reset,this.speed)},e.prototype._reflow=function(){return this.element.offsetHeight},e.prototype._reset=function(){return this._stopTimers(),this.value=0,this.opacity=n,this._withSpeed(0,function(e){return function(){return e._updateStyle(!0)}}(this))},e.prototype._stopTimers=function(){return this._stopTrickle(),clearTimeout(this.fadeTimer),clearTimeout(this.resetTimer)},e.prototype._startTrickle=function(){return this.trickleTimer?void 0:this.trickleTimer=setTimeout(this._trickle,this.speed)},e.prototype._stopTrickle=function(){return clearTimeout(this.trickleTimer),delete this.trickleTimer},e.prototype._trickle=function(){return this.advanceTo(this.value+Math.random()/2),this.trickleTimer=setTimeout(this._trickle,this.speed)},e.prototype._withSpeed=function(e,t){var n,i;return n=this.speed,this.speed=e,i=t(),this.speed=n,i},e.prototype._updateStyle=function(e){return null==e&&(e=!1),e&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},e.prototype._changeContentToForceRepaint=function(){return this.content=""===this.content?" ":""},e.prototype._createCSSRule=function(){return this.elementSelector+"."+t+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+(this.display?this.value:0)+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},e}(),o={enable:s.enable,disable:s.disable,setDelay:function(e){return q=e},start:function(e){return s.enable().start(e)},advanceTo:function(e){return null!=Q?Q.advanceTo(e):void 0},done:function(){return null!=Q?Q.done():void 0}},j=function(){return document.addEventListener("DOMContentLoaded",function(){return oe(i.CHANGE,[document.body]),oe(i.UPDATE)},!0)},A=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(e,t,n){return jQuery.trim(t.responseText)?oe(i.UPDATE):void 0}):void 0},R=function(e){var t,i,r,s;return(null!=(s=e.state)?s.turbolinks:void 0)&&e.state.url!==g.url?(r=new n(g.url),i=new n(e.state.url),i.withoutHash()===r.withoutHash()?ue():(t=N[i.absolute])?(c(),P(t,{scroll:[t.positionX,t.positionY]})):de(e.target.location.href)):void 0},I=function(){return J(),s.enable(),document.addEventListener("click",t.installHandlerLast,!0),window.addEventListener("hashchange",J,!1),window.addEventListener("popstate",R,!1)},u=window.history&&"pushState"in window.history&&"state"in window.history,ae=navigator.userAgent,a=(-1!==ae.indexOf("Android 2.")||-1!==ae.indexOf("Android 4.0"))&&-1!==ae.indexOf("Mobile Safari")&&-1===ae.indexOf("Chrome")&&-1===ae.indexOf("Windows Phone"),te="GET"===(U=M("request_method"))||""===U,d=u&&!a&&te,l=document.addEventListener&&document.createEvent,l&&(j(),A()),d?(de=T,I()):de=function(e){return null==e&&(e=document.location.href),document.location.href=e},this.Turbolinks={visit:de,replace:Z,pagesCached:V,cacheCurrentPage:c,enableTransitionCache:w,disableRequestCaching:b,ProgressBar:o,allowLinkExtensions:r.allowExtensions,supported:d,EVENTS:f(i)}}.call(this),function(){"use strict";var e,t,n,i,r,s,o,a,l,u,d,c,h,p,f,m,v,y=function(e,t){return function(){return e.apply(t,arguments)}},g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},b={}.hasOwnProperty,w=function(e,t){function n(){this.constructor=e}for(var i in t)b.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};a=function(){function e(e,t,n,i){this.presentz=e,this.videoContainer=t,this.width=n,this.height=i,this.handleEvent=y(this.handleEvent,this),this.video=new h(["play"],["pause"],["end"],this.presentz),this.elementId=this.presentz.newElementName(),this.videoData=null,this.time=0}var t;return t="https://player.sambatech.com.br/v2current/samba.player.api.js/media/js/api/samba.player.api.parent.js",e.prototype.ensureSambatechIframeAPILoaded=function(e){var n,i,r;r=document.createElement("script"),r.type="text/javascript",r.setAttribute("samba-player-api","player"),r.setAttribute("name","samba-player-api"),r.onload=e,r.src=t,n=jQuery("script"),0===n.length?jQuery(this.videoContainer)[0].appendChild(r):(i=n[0],i.parentNode.insertBefore(r,i))},e.prototype.changeVideo=function(e,t){return this.wouldPlay=t,this.videoData=e,this.ensureSambatechIframeAPILoaded(function(t){return function(){v.videoSamba=t.video,v.wouldPlaySamba=t.wouldPlay,t.player=new SambaPlayer("player_video",{height:t.height,width:t.width,ph:t.playerKey(e),m:t.videoId(e),events:{onLoad:"onLoadSamba",onStart:"onStartSamba",onPause:"onPauseSamba",onFinish:"onFinishedSamba",onResume:"onStartSamba"}})}}(this))},e.prototype.videoId=function(e){var t,n;return n=e.url.toLowerCase(),t=e.url,-1!==n.indexOf("https://player.sambatech.com.br/current/samba-player.js")&&(t=t.substr(t.indexOf("m=")+2),-1!==t.indexOf("&")&&(t=t.substr(0,t.indexOf("&")))),t},e.prototype.playerKey=function(e){var t,n;return n=e.url.toLowerCase(),t=e.url,-1!==n.indexOf("https://player.sambatech.com.br/current/samba-player.js")&&(t=t.substr(t.indexOf("ph=")+3),-1!==t.indexOf("&")&&(t=t.substr(0,t.indexOf("&")))),t},e.prototype.handleEvent=function(e){this.video.handleEvent(e.data)},e.prototype.handle=function(e){var t;return t=e.url.toLowerCase(),-1!==t.indexOf("https://player.sambatech.com.br/current/samba-player.js")},e.prototype.currentTime=function(){return 0},e.prototype.skipTo=function(e,t){var n;return null==t&&(t=!1),null!=(null!=(n=this.player)?n.seek:void 0)&&((t||this.isPaused())&&this.player.seek(e),t&&this.player.play()),!1},e.prototype.pause=function(){return this.player.pause()},e.prototype.isPaused=function(){return this.video.isInPauseState},e.prototype.onStartSamba=function(){return videoSamba.handleEvent("play")},e.prototype.onPauseSamba=function(){return videoSamba.handleEvent("pause")},e.prototype.onFinishedSamba=function(){return videoSamba.handleEvent("end")},e.prototype.onLoadSamba=function(){return wouldPlaySamba?videoSamba.play():void 0},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.SambatechPlugin=a,v.onStartSamba=a.prototype.onStartSamba,v.onPauseSamba=a.prototype.onPauseSamba,v.onFinishedSamba=a.prototype.onFinishedSamba,v.onLoadSamba=a.prototype.onLoadSamba,v.videoSamba=null,v.wouldPlaySamba=null,f=function(){function e(e,t,n,i){this.presentz=e,this.videoContainer=t,this.width=n,this.height=i,this.handleEvent=y(this.handleEvent,this),this.onReady=y(this.onReady,this),this.video=new h(["play"],["pause"],["end"],this.presentz),this.elementId=this.presentz.newElementName()}var t;return t="//fast.wistia.com/assets/external/E-v1.js",e.prototype.ensureWistiaIframeAPILoaded=function(e){var n,i,r;0===jQuery('script[src="'+t+'"]').length?(r=document.createElement("script"),r.type="text/javascript",r.src=t,r.onload=e,n=jQuery("script"),0===n.length?jQuery(this.videoContainer)[0].appendChild(r):(i=n[0],i.parentNode.insertBefore(r,i))):e()},e.prototype.changeVideo=function(e,t){return this.wouldPlay=t,jQuery(this.videoContainer).append("<div id='wistia_"+this.videoId(e)+"' class='wistia_embed' style='width:"+this.width+"px;height:"+this.height+"px;'>&nbsp;</div>"),this.ensureWistiaIframeAPILoaded(function(t){return function(){var n;jQuery(t.videoContainer).append('<div id="'+t.elementId+'"></div>'),t.player=Wistia.embed(t.videoId(e),{version:"v1",videoWidth:t.width,videoHeight:t.height,playerColor:"688AAD"}),t.player.bind("ready",function(){return this.onReady}),n=t.video,t.player.bind("play",function(){return n.handleEvent("play")}),t.player.bind("pause",function(){return n.handleEvent("pause")}),t.player.bind("end",function(){return n.handleEvent("end")})}}(this))},e.prototype.videoId=function(e){var t,n;return n=e.url.toLowerCase(),t=e.url,-1!==n.indexOf("//www.wistia.com/")&&(t=t.substr(t.lastIndexOf("/")+1),-1!==t.indexOf("?")&&(t=t.substr(0,t.indexOf("?")))),t},e.prototype.onReady=function(){return this.wouldPlay?this.play():void 0},e.prototype.handleEvent=function(e){this.video.handleEvent(e.data)},e.prototype.handle=function(e){var t;return t=e.url.toLowerCase(),-1!==t.indexOf("//www.wistia.com/")},e.prototype.currentTime=function(){var e;return null!=(null!=(e=this.player)?e.time:void 0)?this.player.time():0},e.prototype.skipTo=function(e,t){var n;return null==t&&(t=!1),null!=(null!=(n=this.player)?n.seekTo:void 0)&&((t||this.isPaused())&&this.player.seekTo(e,!0),t&&this.play()),!1},e.prototype.play=function(){return this.player.playVideo()},e.prototype.pause=function(){return this.player.pauseVideo()},e.prototype.isPaused=function(){return this.video.isInPauseState},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.WistiaPlugin=f,h=function(){function e(e,t,n,i){this.playStates=e,this.pauseStates=t,this.finishStates=n,this.presentz=i,this.isInPauseState=!0}return e.prototype.handleEvent=function(e){var t,n,i,r;if(this.isInPlayState=g.call(this.playStates,e)>=0,this.isInPauseState=g.call(this.pauseStates,e)>=0||!this.isInPlayState,this.isInFinishState=g.call(this.finishStates,e)>=0,this.isInPlayState?(this.presentz.startTimeChecker(),n=this.presentz.listeners.play):(this.isInPauseState||this.isInFinishState)&&(this.presentz.stopTimeChecker(),this.isInPauseState?n=this.presentz.listeners.pause:this.isInFinishState&&(n=this.presentz.listeners.finish)),null!=n)for(i=0,r=n.length;r>i;i++)(t=n[i])();
this.isInFinishState&&this.presentz.currentChapterIndex<this.presentz.presentation.chapters.length-1&&this.presentz.changeChapter(this.presentz.currentChapterIndex+1,0,!0)},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.Video=h,t=function(){function e(e,t,n,i){this.presentz=e,this.videoContainer=t,this.width=n,this.height=i,this.video=new h(["play"],["pause"],["ended"],this.presentz),this.elementId=this.presentz.newElementName()}return e.prototype.handle=function(e){return!0},e.prototype.changeVideo=function(e,t){var n,i;this.wouldPlay=t,n=jQuery(this.videoContainer),n.empty(),n.append('<video id="'+this.elementId+'" controls preload="none" src="'+e.url+'" width="100%" height="100%"></video>'),i={timerRate:500,success:function(e){return function(t){e.onPlayerLoaded(t)}}(this)},new MediaElementPlayer("#"+this.elementId,i)},e.prototype.onPlayerLoaded=function(e){var t;this.player=e,t=function(e){return function(t){e.video.handleEvent(t.type)}}(this),this.player.addEventListener("play",t,!1),this.player.addEventListener("pause",t,!1),this.player.addEventListener("ended",t,!1),this.player.load(),this.wouldPlay&&this.play()},e.prototype.currentTime=function(){return this.player.currentTime},e.prototype.skipTo=function(e,t){return null==t&&(t=!1),null!=this.player&&this.player.currentTime>0&&(this.player.setCurrentTime(e),t&&this.play()),!1},e.prototype.play=function(){return this.player.play()},e.prototype.pause=function(){return this.player.pause()},e.prototype.isPaused=function(){return this.video.isInPauseState},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.Html5Video=t,p=function(){function e(e,t,n,i){this.presentz=e,this.videoContainer=t,this.width=n,this.height=i,this.receiveVideoInfo=y(this.receiveVideoInfo,this),this.video=new h(["play"],["pause"],["finish"],this.presentz),this.wouldPlay=!1,this.currentTimeInSeconds=0,this.vimeoCallbackFunctionName=this.presentz.newElementName("callback"),"undefined"!=typeof window&&null!==window&&(window[this.vimeoCallbackFunctionName]=this.receiveVideoInfo),this.elementId=this.presentz.newElementName()}return e.prototype.changeVideo=function(e,t){var n;this.videoData=e,this.wouldPlay=t,n={url:"http://vimeo.com/api/v2/video/"+this.videoId(this.videoData)+".json",dataType:"jsonp",jsonpCallback:this.vimeoCallbackFunctionName},jQuery.ajax(n)},e.prototype.videoId=function(e){var t;return t=e.url,t=t.substr(t.lastIndexOf("/")+1),-1!==t.indexOf("?")&&(t=t.substr(0,t.indexOf("?"))),t},e.prototype.receiveVideoInfo=function(e){var t,n,i,r;n="http://player.vimeo.com/video/"+this.videoId(this.videoData)+"?api=1&player_id="+this.elementId,0===jQuery("#"+this.elementId).length?(r='<iframe id="'+this.elementId+'" src="'+n+'" width="'+this.width+'" height="'+this.height+'" frameborder="0"></iframe>',jQuery(this.videoContainer).append(r),t=jQuery("#"+this.elementId)[0],i=function(e){return function(t){e.onReady(t)}}(this),$f(t).addEvent("ready",i)):(t=jQuery("#"+this.elementId)[0],t.src=n)},e.prototype.handle=function(e){return-1!==e.url.toLowerCase().indexOf("//vimeo.com/")},e.prototype.onReady=function(e){this.player=$f(e),this.player.addEvent("play",function(e){return function(){e.video.handleEvent("play")}}(this)),this.player.addEvent("pause",function(e){return function(){e.video.handleEvent("pause")}}(this)),this.player.addEvent("finish",function(e){return function(){e.video.handleEvent("finish")}}(this)),this.player.addEvent("playProgress",function(e){return function(t){e.currentTimeInSeconds=t.seconds}}(this)),this.player.addEvent("loadProgress",function(e){return function(t){e.loadedTimeInSeconds=parseInt(parseFloat(t.duration)*parseFloat(t.percent))}}(this)),this.wouldPlay&&(this.wouldPlay=!1,this.play())},e.prototype.currentTime=function(){return this.currentTimeInSeconds},e.prototype.skipTo=function(e,t){return null==t&&(t=!1),e<=this.loadedTimeInSeconds&&(this.player.api("seekTo",e+2),t&&this.play()),!1},e.prototype.play=function(){return this.player.api("play")},e.prototype.pause=function(){return this.player.api("pause")},e.prototype.isPaused=function(){return this.video.isInPauseState},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.Vimeo=p,m=function(){function e(e,t,n,i){this.presentz=e,this.videoContainer=t,this.width=n,this.height=i,this.handleEvent=y(this.handleEvent,this),this.onReady=y(this.onReady,this),this.video=new h([1],[-1,2],[0],this.presentz),this.elementId=this.presentz.newElementName()}var t;return t="//www.youtube.com/iframe_api",e.prototype.ensureYoutubeIframeAPILoaded=function(e){var n,i,r;0===jQuery('script[src="'+t+'"]').length?(r=document.createElement("script"),r.type="text/javascript",r.async=!0,r.src=t,n=jQuery("script"),0===n.length?jQuery(this.videoContainer)[0].appendChild(r):(i=n[0],i.parentNode.insertBefore(r,i)),window.onYouTubeIframeAPIReady=function(){return e()}):e()},e.prototype.changeVideo=function(e,t){this.wouldPlay=t,this.ensureYoutubeIframeAPILoaded(function(t){return function(){0===jQuery("#"+t.elementId).length?(jQuery(t.videoContainer).append('<div id="'+t.elementId+'"></div>'),t.player=new YT.Player(t.elementId,{height:t.height,width:t.width,videoId:t.videoId(e),playerVars:{rel:0,wmode:"opaque"},events:{onReady:t.onReady,onStateChange:t.handleEvent}})):t.player.cueVideoById(t.videoId(e))}}(this))},e.prototype.videoId=function(e){var t,n;return n=e.url.toLowerCase(),t=e.url,-1!==n.indexOf("//youtu.be/")?(t=t.substr(t.lastIndexOf("/")+1),-1!==t.indexOf("?")&&(t=t.substr(0,t.indexOf("?")))):(-1!==n.indexOf("//youtube.com/")||-1!==n.indexOf("//www.youtube.com/"))&&(t=t.substr(t.indexOf("v=")+2),-1!==t.indexOf("&")&&(t=t.substr(0,t.indexOf("&")))),t},e.prototype.onReady=function(){return this.wouldPlay?this.play():void 0},e.prototype.handleEvent=function(e){this.video.handleEvent(e.data)},e.prototype.handle=function(e){var t;return t=e.url.toLowerCase(),-1!==t.indexOf("//youtu.be/")||-1!==t.indexOf("//youtube.com/")||-1!==t.indexOf("//www.youtube.com/")},e.prototype.currentTime=function(){var e;return null!=(null!=(e=this.player)?e.getCurrentTime:void 0)?this.player.getCurrentTime():0},e.prototype.skipTo=function(e,t){var n;return null==t&&(t=!1),null!=(null!=(n=this.player)?n.seekTo:void 0)&&((t||this.isPaused())&&this.player.seekTo(e,!0),t&&this.play()),!1},e.prototype.play=function(){return this.player.playVideo()},e.prototype.pause=function(){return this.player.pauseVideo()},e.prototype.isPaused=function(){return this.video.isInPauseState},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.Youtube=m,e=function(){function e(e,n,i,r){this.presentz=e,this.video=new t(this.presentz,n,i,r)}return e.prototype.changeVideo=function(e,t){var n;this.wouldPlay=t,n={url:e.url,dataType:"jsonp",data:"skin=json",jsonpCallback:"presentz.videoPlugin.receiveVideoInfo"},jQuery.ajax(n)},e.prototype.receiveVideoInfo=function(e){var t;t={url:e[0].Post.media.url},this.video.changeVideo(t,this.wouldPlay),this.player=this.video.player,this.skipTo=this.video.skipTo},e.prototype.handle=function(e){return-1!==e.url.toLowerCase().indexOf("http://blip.tv")},e.prototype.currentTime=function(){return this.video.currentTime()},e.prototype.skipTo=function(e,t){return null==t&&(t=!1),this.video.skipTo(e,t)},e.prototype.play=function(){return this.video.play()},e.prototype.pause=function(){return this.video.pause()},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.BlipTv=e,i=function(){function e(e,t){this.presentz=e,this.slideContainer=t,this.preloadedSlides=[]}return e.prototype.handle=function(e){return null!=e.url},e.prototype.changeSlide=function(e){var t,n;t=jQuery(""+this.slideContainer+" img"),0===t.length?(n=jQuery(this.slideContainer),n.empty(),n.append('<img src="'+e.url+'"/>')):t.attr("src",e.url)},e.prototype.preload=function(e){var t,n;n=e.url,g.call(this.preloadedSlides,n)>=0||(t=new Image,t.src=e.url,this.preloadedSlides.push(e.url))},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.ImgSlide=i,l=function(){function e(e,t,n,i){this.presentz=e,this.slideContainer=t,this.width=n,this.height=i,this.currentSlide=0,this.elementId=this.presentz.newElementName(),this.swfId=this.presentz.newElementName()}return e.prototype.handle=function(e){return null==e.url?!1:-1!==e.url.toLowerCase().indexOf("slideshare.net")},e.prototype.slideId=function(e){return e.url.substr(e.url.lastIndexOf("/")+1,e.url.lastIndexOf("#")-1-e.url.lastIndexOf("/"))},e.prototype.slideNumber=function(e){return parseInt(e.url.substr(e.url.lastIndexOf("#")+1))},e.prototype.changeSlide=function(e){var t,n,i,r,s,o,a,l,u;n=jQuery("#"+this.swfId),0===n.length?(t=jQuery(this.slideContainer),t.empty(),t.append('<div id="'+this.elementId+'"></div>'),s=this.slideId(e),l={allowScriptAccess:"always",wmode:"opaque"},i={id:this.swfId},o={doc:s,rel:0},swfobject.embedSWF("http://static.slidesharecdn.com/swf/ssplayer2.swf",this.elementId,this.width,this.height,"8",null,o,l,i),this.currentSlide=0):(u=n[0],a=this.slideNumber(e),null!=u.getCurrentSlide&&(r=u.getCurrentSlide(),a===r+1?u.next():(u.jumpTo(this.slideNumber(e)),this.currentSlide=u.getCurrentSlide())))},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.SlideShare=l,u=function(){function e(e,t){this.presentz=e,this.slideContainer=t,this.elementId=this.presentz.newElementName(),this.preloadedSlides=[],this.slideInfo={}}return e.prototype.handle=function(e){return null==e.url?!1:-1!==e.url.toLowerCase().indexOf("slideshare.net")&&null!=e.public_url},e.prototype.slideNumber=function(e){return parseInt(e.url.substr(e.url.lastIndexOf("#")+1))},e.prototype.ensureSlideInfoFetched=function(e,t){return null!=this.slideInfo[e]?t():void jQuery.ajax({url:"http://www.slideshare.net/api/oembed/2",data:{url:e,format:"json"},dataType:"jsonp",success:function(n){return function(i){return n.slideInfo[e]=i,t()}}(this)})},e.prototype.urlOfSlide=function(e){var t;return t=this.slideInfo[e.public_url],2===t.conversion_version?""+t.slide_image_baseurl+this.slideNumber(e)+t.slide_image_baseurl_suffix:""+t.slide_image_baseurl+"-slide-"+this.slideNumber(e)+t.slide_image_baseurl_suffix},e.prototype.changeSlide=function(e){var t;0===jQuery("#"+this.elementId).length&&(t=jQuery(this.slideContainer),t.empty(),t.append('<div id="'+this.elementId+'"></div>')),this.ensureSlideInfoFetched(e.public_url,function(t){return function(){var n;return n=jQuery("#"+t.elementId+" img"),0===n.length?jQuery("#"+t.elementId).append('<img src="'+t.urlOfSlide(e)+'"/>'):n.attr("src",t.urlOfSlide(e))}}(this))},e.prototype.preload=function(e){null!=e.public_url&&this.ensureSlideInfoFetched(e.public_url,function(t){return function(){var n,i;return i=t.urlOfSlide(e),g.call(t.preloadedSlides,i)>=0?void 0:(n=new Image,n.src=i,t.preloadedSlides.push(i))}}(this))},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.SlideShareOEmbed=u,c=function(){function e(e,t,n,i){this.presentz=e,this.slideContainer=t,this.width=n,this.height=i,this.preloadedSlides=[],this.elementId=this.presentz.newElementName(),this.swfId=this.presentz.newElementName(),this.preloadSlideContainerId=this.presentz.newElementName(),this.preloadSlideId=this.presentz.newElementName()}return e.prototype.handle=function(e){return null==e.url?!1:-1!==e.url.toLowerCase().indexOf(".swf")},e.prototype.changeSlide=function(e){var t,n,i,r;0===jQuery("#"+this.swfId).length?(t=jQuery(this.slideContainer),t.empty(),t.append('<div id="'+this.elementId+'"></div>'),i={wmode:"opaque"},n={id:this.swfId},swfobject.embedSWF(e.url,this.elementId,this.width,this.height,"8",null,null,i,n)):(r=jQuery("#"+this.swfId)[0],r.data=e.url)},e.prototype.preload=function(e){var t,n;n=e.url,g.call(this.preloadedSlides,n)>=0||(jQuery("#"+this.preloadSlideId).remove(),jQuery(this.slideContainer).append('<div id="'+this.preloadSlideContainerId+'"></div>'),t={id:""+this.preloadSlideId,style:"visibility: hidden; position: absolute; margin: 0 0 0 0; top: 0;"},swfobject.embedSWF(e.url,""+this.preloadSlideContainerId,"1","1","8",null,null,null,t,function(t){return function(){return t.preloadedSlides.push(e.url)}}(this)))},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.SwfSlide=c,d=function(){function e(e,t,n,i){this.presentz=e,this.slideContainer=t,this.width=n,this.height=i,this.currentSlide=0,this.elementId=this.presentz.newElementName()}return e.prototype.handle=function(e){return null==e.url?!1:-1!==e.url.toLowerCase().indexOf("speakerdeck.com")},e.prototype.changeSlide=function(e){var t,n,i,r,s;0===jQuery(""+this.slideContainer+" iframe.speakerdeck-iframe").length?(t=jQuery(this.slideContainer),t.empty(),s=this.slideId(e),i=function(e){return function(t){var n;if(-1!==t.origin.indexOf("speakerdeck.com"))return e.speakerdeckOrigin=t.origin,e.speakerdeck=t.source,n=JSON.parse(t.data),"change"===n[0]?e.currentSlide=n[1].number:void 0}}(this),window.addEventListener("message",i,!1),r=document.createElement("script"),r.type="text/javascript",r.async=!0,r.src="http://speakerdeck.com/assets/embed.js",r.setAttribute("class","speakerdeck-embed"),r.setAttribute("data-id",s),t[0].appendChild(r),this.pingInterval=setInterval(function(e){return function(){var t;return t=jQuery(""+e.slideContainer+" iframe.speakerdeck-iframe"),t.length>0&&t[0].contentWindow?t[0].contentWindow.postMessage(JSON.stringify(["ping"]),"*"):void 0}}(this),500)):null!=this.speakerdeck?(n=this.slideNumber(e),this.speakerdeck.postMessage(JSON.stringify(["goToSlide",n]),this.speakerdeckOrigin)):console.log("no speakerdeck")},e.prototype.slideNumber=function(e){return parseInt(e.url.substr(e.url.lastIndexOf("#")+1))},e.prototype.slideId=function(e){return e.url.substring(e.url.lastIndexOf("/")+1,e.url.lastIndexOf("#"))},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.SpeakerDeck=d,n=function(){function e(e,t){this.presentz=e,this.slideContainer=t,this.iframeSelector=""+this.slideContainer+" iframe.iframe-slide-container"}return e.prototype.handle=function(e){return null!=e.url},e.prototype.changeSlide=function(e){var t,n;t=jQuery(this.iframeSelector),0===t.length?(n=jQuery(this.slideContainer),n.empty(),n.append('<iframe frameborder="0" class="iframe-slide-container" src="'+e.url+'"></iframe>')):t.attr("src",e.url)},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.IFrameSlide=n,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.handle=function(e){return null==e.url?!1:-1!==e.url.toLowerCase().indexOf("rvl.io")},t}(n),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.RvlIO=o,r=function(){function e(){}return e.prototype.handle=function(e){return null==e.url},e.prototype.changeSlide=function(){},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.NoSlide=r,s=function(){function e(e,s,h,v){var g,b;b=y(s),g=y(v),this.availableVideoPlugins={vimeo:new p(this,e,b.width,b.height),youtube:new m(this,e,b.width,b.height),wistia_plugin:new f(this,e,b.width,b.height),sambatech_plugin:new a(this,e,b.width,b.height),html5:new t(this,e,b.width,b.height)},this.availableSlidePlugins={slideshare:new l(this,h,g.width,g.height),slideshareoembed:new u(this,h,g.width,g.height),swf:new c(this,h,g.width,g.height),speakerdeck:new d(this,h,g.width,g.height),image:new i(this,h,g.width,g.height),iframe:new n(this,h,g.width,g.height),rvlio:new o(this,h,g.width,g.height),none:new r},this.videoPlugins=[this.availableVideoPlugins.vimeo,this.availableVideoPlugins.youtube,this.availableVideoPlugins.wistia_plugin,this.availableVideoPlugins.sambatech_plugin],this.slidePlugins=[this.availableSlidePlugins.slideshare,this.availableSlidePlugins.slideshareoembed,this.availableSlidePlugins.swf,this.availableSlidePlugins.speakerdeck,this.availableSlidePlugins.rvlio,this.availableSlidePlugins.none],this.defaultVideoPlugin=this.availableVideoPlugins.html5,this.defaultSlidePlugin=this.availableSlidePlugins.image,this.currentChapterIndex=-1,this.currentSlideIndex=-1,this.listeners={slidechange:[],videochange:[],timechange:[],play:[],pause:[],finish:[]},this.isSynchronized=!0}var s,h,v,y;return s=function(){},y=function(e){var t,n;return t=e.split("x"),n={width:jQuery.trim(t[0]),height:jQuery.trim(t[1])}},e.prototype.registerVideoPlugin=function(e,t){this.availableVideoPlugins[e]=t,this.videoPlugins.push(t)},e.prototype.registerSlidePlugin=function(e,t){this.availableSlidePlugins[e]=t,this.slidePlugins.push(t)},e.prototype.init=function(e){var t,n,i,r,s,o,a,l;for(this.presentation=e,this.intervalSet&&this.stopTimeChecker(),this.currentChapterIndex=-1,this.currentSlideIndex=-1,a=this.presentation.chapters,i=0,s=a.length;s>i;i++){for(t=a[i],t.video._plugin=v(this,t.video),l=t.slides,r=0,o=l.length;o>r;r++)n=l[r],n._plugin=h(this,n);null==t.duration&&null!=t.slides&&t.slides.length>0&&(t.duration=t.slides[t.slides.length-1].time+5)}},e.prototype.on=function(e,t){return this.listeners[e].push(t)},e.prototype.changeChapter=function(e,t,n,i){var r,o,a,l,u,d;if(null==i&&(i=s),o=this.presentation.chapters[e],null==o)return i("no chapter at index "+e);if(a=o.slides[t],null==a)return i("no slide at index "+t);if(e!==this.currentChapterIndex||-1!==this.currentChapterIndex&&this.presentation.chapters[this.currentChapterIndex].video._plugin.skipTo(a.time,n)){if(this.changeSlide(e,t),e!==this.currentChapterIndex)for(o.video._plugin.changeVideo(o.video,n),o.video._plugin.skipTo(a.time,n),d=this.listeners.videochange,l=0,u=d.length;u>l;l++)(r=d[l])(this.currentChapterIndex,this.currentSlideIndex,e,t);this.currentChapterIndex=e}i()},e.prototype.changeSlide=function(e,t){var n,i,r,s,o,a,l,u,d,c;for(o=this.presentation.chapters[e].slides[t],o._plugin.changeSlide(o),s=this.currentSlideIndex,this.currentSlideIndex=t,i=this.presentation.chapters[e].slides.slice(t+1,+(t+5)+1||9e9),a=0,u=i.length;u>a;a++)r=i[a],null!=r._plugin.preload&&r._plugin.preload(r);for(c=this.listeners.slidechange,l=0,d=c.length;d>l;l++)(n=c[l])(this.currentChapterIndex,s,e,t)},e.prototype.checkSlideChange=function(e){var t,n,i,r,s,o,a,l,u;for(r=this.presentation.chapters[this.currentChapterIndex].slides,s=0,a=r.length;a>s;s++)i=r[s],i.time<=e&&(t=i);for(null!=t&&r.indexOf(t)!==this.currentSlideIndex&&this.changeSlide(this.currentChapterIndex,r.indexOf(t)),u=this.listeners.timechange,o=0,l=u.length;l>o;o++)(n=u[o])(e)},v=function(e,t){var n,i;return null!=t._plugin_id&&null!=e.availableVideoPlugins[t._plugin_id]?e.availableVideoPlugins[t._plugin_id]:(i=function(){var i,r,s,o;for(s=e.videoPlugins,o=[],i=0,r=s.length;r>i;i++)n=s[i],n.handle(t)&&o.push(n);return o}(),i.length>0?i[0]:e.defaultVideoPlugin)},h=function(e,t){var n,i;return null!=t._plugin_id&&null!=e.availableSlidePlugins[t._plugin_id]?e.availableSlidePlugins[t._plugin_id]:(i=function(){var i,r,s,o;for(s=e.slidePlugins,o=[],i=0,r=s.length;r>i;i++)n=s[i],n.handle(t)&&o.push(n);return o}(),i.length>0?i[0]:e.defaultSlidePlugin)},e.prototype["synchronized"]=function(e){return this.isSynchronized=e,this.intervalSet&&!this.isSynchronized&&this.stopTimeChecker(),this.intervalSet||!this.isSynchronized||this.isPaused()?void 0:this.startTimeChecker()},e.prototype.startTimeChecker=function(){var e;this.isSynchronized&&(clearInterval(this.interval),this.intervalSet=!0,e=function(e){return function(){var t,n;n=e.presentation.chapters[e.currentChapterIndex].video._plugin,n instanceof a?(t=e,n.player.getStatus(function(e){return-1!==t.currentChapterIndex?t.checkSlideChange(e.status.time):void 0})):-1!==e.currentChapterIndex&&e.checkSlideChange(e.presentation.chapters[e.currentChapterIndex].video._plugin.currentTime())}}(this),this.interval=setInterval(e,500))},e.prototype.stopTimeChecker=function(){clearInterval(this.interval),this.intervalSet=!1},e.prototype.newElementName=function(e){return null!=e?""+e+"_"+Math.round(1e6*Math.random()):"element_"+Math.round(1e6*Math.random())},e.prototype.pause=function(){return-1!==this.currentChapterIndex?this.presentation.chapters[this.currentChapterIndex].video._plugin.pause():void 0},e.prototype.isPaused=function(){return-1!==this.currentChapterIndex?this.presentation.chapters[this.currentChapterIndex].video._plugin.isPaused():void 0},e.prototype.play=function(){return-1!==this.currentChapterIndex?this.presentation.chapters[this.currentChapterIndex].video._plugin.play():void 0},e.prototype.next=function(){return this.presentation.chapters[this.currentChapterIndex].slides.length>this.currentSlideIndex+1?(this.changeChapter(this.currentChapterIndex,this.currentSlideIndex+1,!0),!0):this.presentation.chapters.length>this.currentChapterIndex+1?(this.changeChapter(this.currentChapterIndex+1,0,!0),!0):!1},e.prototype.previous=function(){return this.currentSlideIndex-1>=0?(this.changeChapter(this.currentChapterIndex,this.currentSlideIndex-1,!0),!0):this.currentChapterIndex-1>=0?(this.changeChapter(this.currentChapterIndex-1,this.presentation.chapters[this.currentChapterIndex-1].slides.length-1,!0),!0):!1},e}(),v="undefined"!=typeof exports&&null!==exports?exports:window,null==v.presentz&&(v.presentz={}),v.presentz.Presentz=s,v.Presentz=s}.call(this),$(function(){$(document).on("ready page:load page:partial-load",function(){bindPaginationLink("#js-product-more-link","js-product-list","append"),bindPaginationLink("#js-follow-more-link","js-follow-list","append"),bindPaginationLink("#js-post-more-link","js-post-list","append"),bindPaginationLink("#js-course-content-more-link","js-course-tree","append","li[id^=module]"),bindPaginationLink("#js-course-content-prev-link","js-course-tree","prepend","li[id^=module]"),bindPaginationLink("#js-course-more-link","js-course-list","append")})});var bindPaginationLink=function(e,t,n,i){var r=function(r){r.preventDefault();var s=$(this),o=s.parent(),a=o.find(".js-paginate-spinner"),l=s.attr("href"),u="false"==s.attr("data-turbolinks-scroll")?!1:!0;s.hide(),a.show(),$.get(l,function(r){body='<div id="body-mock">'+r.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/gi,"")+"</div>";var s=$(body);void 0!==i&&$("#"+t+" "+i).each(function(){var e=s.find("#"+this.id);"append"===n?e.remove():e.length>0&&$(this).remove()}),s.find(e).length||$(e).parent().remove();var o={scroll:u};o[n]=[t],Turbolinks.replace(s.html(),o)})};$(e).unbind("click",r).bind("click",r)},AttendanceHandler=function(e){this.handle=function(){e.player.remove(),"time"==e.type?$(".js-alert-max-time").show():$(".js-alert-max-attempts").show()}},injectLink=function(e,t,n){var i=document.createElement("link");if(i.rel="stylesheet",i.href=e,t)for(var r in t)i.setAttribute(r,t[r]);i.onreadystatechange=i.onload=function(){var e=i.readyState;(!e||/loaded|complete/.test(e))&&"function"==typeof n&&n()},document.head.appendChild(i)},injectScript=function(e,t,n){var i=document.createElement("script");if(i.src=e,i.async=!0,t)for(var r in t)i.setAttribute(r,t[r]);i.onreadystatechange=i.onload=function(){var e=i.readyState;(!e||/loaded|complete/.test(e))&&"function"==typeof n&&n()},document.head.appendChild(i)},removeScript=function(e){var t=$('script[src="'+e+'"]');t.length&&t.remove()},loadAsset=function(e,t,n){void 0===verifyGetter(e)?injectScript(t,{},n):n()},verifyGetter=function(getter){try{return eval(getter)}catch(err){return void 0}},loadCep=function(){this.start=function(){$("[data-enable-cep-service]").size()>0&&injectScript("https://cdn.jsdelivr.net/npm/cep-promise/dist/cep-promise.min.js",{},function(){bindCepService(window.cep)})},this.bindCepService=function(e){$("#user-cep, .cep").on("keyup",function(){var t=$(this).val().replace(/[-\.]/g,"");8==t.length&&e(t).then(function(e){$(document).trigger("cep-result",e)})})},this.start()},loadMathjax=function(){this.start=function(){$(".math-tex").size()>0&&injectScript("https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML",{},function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub])})},this.start()},AudioPlayer=function(e){this.trackeable=!0,this.init=function(){this.audio=document.getElementById("js-audio-player"),this.$audio=$(this.audio)},this.init(),this.show=function(e){var t=this;$(".js-player-loading").addClass("hide"),t.$audio.removeClass("hide"),e()},this.start=function(e){var t=this,n=!1;this.$audio.bind("canplay",function(){t.show(e),n=!0}),setTimeout(function(){n||t.show(e)},1500)},this.on=function(e,t){var n=this;if("progresschange"==e){var i=[.25,.5,.75];this.$audio.bind("timeupdate",function(e){var r=e.currentTarget.currentTime,s=parseFloat((r/n.audio.duration).toFixed(2));s>=i[0]&&t(100*i.shift())}),this.$audio.bind("ended",function(){t(100)})}else this.$audio.bind(e,function(e){t(e)})},this.remove=function(){this.$audio.parent().remove()},this.getDuration=function(){var e=jQuery.Deferred(),t=this;return setTimeout(function(){e.resolve(t.audio.duration)},1),e.promise()},this.getTime=function(){var e=jQuery.Deferred(),t=this;return setTimeout(function(){e.resolve(t.audio.currentTime)},1),e.promise()}},DocumentPlayer=function(e,t){this.trackeable=!1,this.start=function(e){var t="https://cdn01.boxcdn.net/platform/preview/1.23.0/pt-BR/preview.js",n="https://cdn01.boxcdn.net/platform/preview/1.23.0/en-US/preview.css",i="https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise",r=this;"undefined"==typeof Box?injectScript(i,{},function(){injectScript(t,{},function(){injectLink(n,{},function(){r.embed(e)})})}):this.embed(e)},this.resizeDocument=function(){var e=this;$(".bp-container").css({height:$(".box-viewer").css("height")}),setTimeout(function(){e.viewer.resize()},1e3)},this.embed=function(e){if(t.pdf)e();else{var n=$("#box-access-token").val(),i=$("#box-downloadable").val();this.viewer=new Box.Preview,this.viewer.removeAllListeners(),this.viewer.addListener("load",this.resizeDocument),this.viewer.addListener("load",e),this.viewer.show(t.host_key,n,{container:".js-box-viewer",logoUrl:"https://edools-3-production.s3.amazonaws.com/org-2460%2Fschool-2459%2Feed35fae7169351616c09e517ae65f11%2Fblank.gif",showAnnotations:!1,showDownload:i})}},this.getDuration=function(){var e=$.Deferred();return e.resolve(0),e.promise()}},EdoolsPlayer=function(e,t){this.init=function(){if(this.progress=e.data("lesson-progress"),this.trackeable=e.hasClass("js-trackeable")&&this.progress&&this.progress.id,this.enrollment=e.data("enrollment"),this.courseContent=e.data("course-content"),this.lesson=e.data("lesson"),this.media=e.data("media"),this.apiKey=e.data("api-key"),this.mediaPlayer=this.initMediaPlayer(),this.attendanceTracking=new AttendanceTracking(this),e[0].edoolsPlayer=this,this.attendanceTracking.maxAttendanceReached())this.attendanceTracking.handleMaxAttendance();else{var t=this;this.mediaPlayer.start(function(){t.progressTracking=new ProgressTracking(t),t.videoWaterMark=new VideoWaterMark(t),t.attendanceTracking.track()})}},this.initMediaPlayer=function(){var e;switch(this.media.type){case"Video":"Wistia"==this.media.host?e=new WistiaPlayer(this.media.host_key):"Samba"==this.media.host?e=new SambaTechPlayer(this.media.host_key,this):"Vimeo"==this.media.host?e=new VimeoPlayer(this.media.host_key):"Vzaar"==this.media.host?e=new VzaarPlayer(this.media):"Youtube"==this.media.host?e=new YoutubePlayer(this.media,this):"SparkVideos"==this.media.host?e=new SparkVideosPlayer(this.media,this):console.log(this.media.host+"player not found!");break;case"Webinar":e=new WebinarPlayer(this.media);break;case"Document":e=new DocumentPlayer(this.courseContent,this.media);break;case"ScormPackage":e=new ScormPlayer(this.enrollment,this.media,this.apiKey);break;case"LiveStream":e=new LiveStreamPlayer(this.media);break;case"Audio":e=new AudioPlayer(this.media);break;case"VideoSlide":e=new VideoSlidePlayer(this.media);break;default:e=new UntrackeablePlayer}return e},this.getTime=function(){return this.mediaPlayer.getTime()},this.getState=function(){return this.mediaPlayer.getState()},this.getDuration=function(){return this.mediaPlayer.getDuration()},this.setTime=function(e){return this.mediaPlayer.setTime(e)},this.on=function(e,t){return this.mediaPlayer.on?this.mediaPlayer.on(e,t):null},this.remove=function(){this.mediaPlayer.remove()},this.fetchProgress=function(){const e=Object.assign({},this.progress),t=$(".js-edools-player").data("lesson-progress"),n=_.isEqual(e,t),i=n?e:t;return this.progress=i,i},this.setCompletedIcon=function(){void 0!=t&&t.evaluateProgress(t.$progressIcons,!0)},this.reloadProgressView=function(){void 0!=t&&t.reloadProgress(this.enrollment,this.fetchProgress())},this.reloadAttendanceView=function(){void 0!=t&&(this.fetchProgress(),t.reloadAttendance(this.enrollment,this.fetchProgress()))}},LiveStreamPlayer=function(e){this.trackeable=!1,this.init=function(){this.container=$("#liveStreamPlayer")},this.init(),this.start=function(t){void 0!==this.container&&(this.container.html(e.text),t())},this.getDuration=function(){var e=$.Deferred();return e.resolve(0),e.promise()}},SambaTechPlayer=function(e,t){this.trackeable=!0;var n={0:"loading",2:"buffering",3:"playing",4:"paused",5:"ended"};this.start=function(e){var t="https://player.sambatech.com.br/v3/samba.player.api.js",n=this;this.currentTime=0,this.playerCallbacks={},"undefined"==typeof SambaPlayer?injectScript(t,{},function(){n.embed(e)}):this.embed(e)},this.embed=function(n){this.isFirstPlay=!0;var i="samba-player-container-"+e,r=$("#"+i),s=r.data("height"),o=r.data("width"),a=r.data("player-key"),l=this,u={height:s,width:o,ph:a,m:e,name:"samba-player-api","samba-player-api":"player",playerParams:{wideScreen:!0},events:{onLoad:function(){n(l.raw)},"*":function(e){var t,n,i;n={onStart:"play",onResume:"play",onPause:"pause",onFinish:"end",onListen:"progresschange"},i=n[e.event],t=l.playerCallbacks[i],t&&$(t).each(function(t,n){n&&n(e)}),"onStart"===e.event&&l.isFirstPlay&&(l.raw.seek(l.currentTime),l.isFirstPlay=!1)}}};this.raw=new SambaPlayer(i,u),this.on("end",function(e){var n=t.progressTracking;n.progressCompleted||(console.warn("["+getCurrentTime()+"] samba_tech_player.js>> player api esta respondendo com dura\xe7\xe3o errada: "+e.duration),n.addLocalProgress(100,0).then(function(){n.dispatchProgressUpdates({force:!0}).then(function(){console.log("["+getCurrentTime()+"] samba_tech_player.js>> Executado workaround para salvar 100% de progresso!")})}))})},this.getTime=function(){var e=jQuery.Deferred();return this.raw.getStatus(function(t){e.resolve(t.status.time)}),e.promise()},this.getState=function(){var e=jQuery.Deferred();return this.raw.getStatus(function(t){e.resolve(n[t.status.state])}),e.promise()},this.getDuration=function(){var e=jQuery.Deferred();return this.raw.getStatus(function(t){e.resolve(t.duration)}),e.promise()},this.setTime=function(e){this.currentTime=e},this.on=function(e,t){this.raw;if(this.playerCallbacks[e]=this.playerCallbacks[e]||[],("play"===e||"pause"===e||"end"===e)&&this.playerCallbacks[e].push(t),"progresschange"===e){var n=[.25,.5,.75,.85,.95,1];this.playerCallbacks[e].push(function(e){var i=0;i=100*e.eventParam/e.duration,i=Math.round(i),i/100>=n[0]&&t(100*n.shift())})}},this.remove=function(){$("#samba-player-container-"+e).parent().empty()}},ScormPlayer=function(e,t,n){this.trackeable=!0,this.start=function(i){var r=this,s=$("#js-scorm-modal"),o=$("#js-scrom-iframe");$(".js-scorm-launch-button").on("click",function(){var a=$(this),l=a.find(".js-loading-message"),u=a.find(".js-default-message");a.attr("disabled",!0),u.addClass("hide"),l.removeClass("hide");var d=$.ajax({method:"GET",url:window.CORE_HOST+"/media/"+t.id+"/launch_scorm",data:{enrollment_id:e.id},headers:{Authorization:"Token token="+n},contentType:"application/json"});d.success(function(e){r.uri=e.uri,r.externalId=e.external_id,o.attr("src",r.uri),o.load(function(){o.attr("src").length&&(u.removeClass("hide"),l.addClass("hide"),a.attr("disabled",!1),s.on("hidden.bs.modal",function(){o.attr("src",""),i()}),s.modal("show"))})})})},this.remove=function(){$(".js-scorm-content").empty()},this.getDuration=function(){var e=$.Deferred();return e.resolve(0),e.promise()}},SparkVideosPlayer=function(e,t){this.trackeable=!0;var n={ended:"ended",playing:"playing",paused:"paused"};this.start=function(e){var t=(new Date).getTime(),n=this;if(_.includes(window.location.host,"myedools.info")||_.includes(window.location.host,"heroi.dev")||_.includes(window.location.host,"edools-dev.com")||_.includes(window.location.host,"localhost"))var i="//spark-videos.beta.herospark.com/static/js/sparkvideo.2.js?_="+t;else var i="//cs-video.herospark.com/static/js/sparkvideo.2.js?_="+t;
n.playerCallbacks={},n.quarters=[25,50,75,100],"undefined"==typeof SparkVideo?injectScript(i,{},function(){setTimeout(function(){n.embed(e)},1e3)}):n.embed(e)},this.embed=function(i){var r=this,s=$("#spark-videos-player-container"),o=s.data("height"),a=(s.data("width"),s.data("watermark"));if(_.includes(window.location.host,"myedools.info")||_.includes(window.location.host,"heroi.dev"))var l="//spark-videos.beta.herospark.com/api/player/";else var l="//cs-video.herospark.com/api/player/";try{var u=window.location.pathname.split("/courses/")[1].split("/course_contents")[0],d=l+e.organization_uuid+"/"+e.host_key+"?tag="+u}catch(c){var d=l+e.organization_uuid+"/"+e.host_key}r.raw=new SparkVideo("spark-videos-player-container"),t.progress&&t.progress.current_video_time?r.raw.source(d,t.progress.current_video_time,a):r.raw.source(d,0,a),r.raw.dom.frame.height=o,r.raw.registerTimeUpdate(function(e){r.raw.getState()===n.playing?r.progressIntervalUpdating=r.startProgressIntervalUpdating():(r.raw.getState()===n.paused||r.raw.getState()===n.ended)&&clearInterval(r.progressIntervalUpdating)}),i(r.raw)},this.startProgressIntervalUpdating=function(){return setInterval(function(){var e=t.mediaPlayer,n=t.progressTracking,i=e.quarters;null!==e.raw.getTarget().offsetParent?e.getDuration().then(function(t){e.getTime().then(function(e){var r=0;r=100*e/t,r=Math.round(r),r>=i[0]&&(r=i.shift(),n.addLocalProgress(r,e).then(function(){n.dispatchProgressUpdates({force:!0})}))})}):clearInterval(self.progressIntervalUpdating)},1e3)},this.getTime=function(){var e=this,t=jQuery.Deferred();return t.resolve(e.raw.getTime()),t.promise()},this.getState=function(){var e=jQuery.Deferred();return e.resolve(n[this.raw.getState()]),e.promise()},this.getDuration=function(){var e=this,t=jQuery.Deferred();return t.resolve(e.raw.getDuration()),t.promise()},this.setTime=function(e){return this.raw.setTime(e)}},UntrackeablePlayer=function(){this.trackeable=!1,this.start=function(e){e()},this.getDuration=function(){var e=$.Deferred();return e.resolve(0),e.promise()}},VideoSlidePlayer=function(e){this.trackeable=!0,this.init=function(){if(this.container=$("presentz"),this.loading=$("presentz .js-player-loading"),this.duration=this.container.data("duration"),this.slides=this.container.data("slides"),this.videoUrl=this.container.data("video-url"),this.player=new Presentz("#player_video","360x320","#slideshow_player","360x320"),void 0!==this.slides){var e=this;this.presentation=this.buildPresentation(),this.container.on("click","#js-toggle-full-screen",function(){e.toggleFullScreen($(this))})}},this.buildPresentation=function(){var t="Samba"===e.host?"sambatech_plugin":"wistia_plugin";return{title:e.title,chapters:[{video:{url:this.videoUrl,_plugin_id:t},slides:this.slides,duration:this.duration}]}},this.start=function(e){void 0!==this.slides&&(this.player.init(this.presentation),this.player.changeChapter(0,0,!0),this.getHostPlayerAndDuration().then(function(){e()}),this.loading.addClass("hide"),this.container.find("#player").removeClass("hide"))},this.getHostPlayerAndDuration=function(){var e=this,t=jQuery.Deferred();return this.player.on("timechange",function(){void 0===e.hostPlayer?e.hostPlayer=e.player.presentation.chapters[0].video._plugin.player:"number"!=typeof e.duration&&void 0!==e.hostPlayer&&e.getDuration().then(function(n){e.duration=n,t.resolve()})}),t.promise()},this.getDuration=function(){var t=jQuery.Deferred();return"Samba"===e.host?this.hostPlayer.getStatus(function(){t.resolve(status.duration)}):t.resolve(this.hostPlayer.duration()),t.promise()},this.on=function(e,t){var n=this;if("progresschange"==e){var i=[.25,.5,.75,.85,.95,1];this.player.on("timechange",function(e){if(void 0!==n.duration){var r=parseFloat((e/n.duration).toFixed(2));r>=i[0]&&t(100*i.shift())}})}if("play"===e){var r=!1;this.player.on("timechange",function(){r||(t(),r=!0)})}this.bindHostPlayerEvents(e,t)},this.bindHostPlayerEvents=function(t,n){"Samba"===e.host?("play"===t&&(this.hostPlayer.on("onStart",n),this.hostPlayer.on("onResume",n)),"pause"===t&&this.hostPlayer.on("onPause",n),"end"===t&&this.hostPlayer.on("onFinish",n)):this.hostPlayer.bind(t,function(e){n(e)})},this.remove=function(){this.container.remove()},this.toggleFullScreen=function(e){this.isFullScreen||e.removeClass("icon-size-fullscreen").addClass("icon-size-actual")},this.init()},VimeoPlayer=function(e){this.trackeable=!0,this.start=function(e){var t="https://player.vimeo.com/api/player.js",n=this;this.playerCallbacks={},this.quarters=[.25,.5,.75,.85,.95,1],"undefined"==typeof Vimeo?injectScript(t,{},function(){n.embed(e)}):this.embed(e)},this.embed=function(t){var n=e.replace("/videos/",""),i=this;$("#vimeo-player-container").find(".js-player-loading").remove(),this.raw=new Vimeo.Player("vimeo-player-container",{id:n}),this.raw.ready().then(function(){i.bindEvents(),t(i.raw)})},this.on=function(e,t){this.playerCallbacks[e]=this.playerCallbacks[e]||[],this.playerCallbacks[e].push(t)},this.bindEvents=function(){if(!this.eventsBinded){this.eventsBinded=!0;var e=this.raw,t=this;e.on("timeupdate",function(e){var n=e.percent.toFixed(2);if(n>=t.quarters[0]){var i=t.playerCallbacks.progresschange;n=100*t.quarters.shift(),t.runCallbacks(i,n)}}),$.each(["play","pause"],function(n,i){e.on(i,function(){var e=t.playerCallbacks[i];t.runCallbacks(e)})}),e.on("ended",function(){var e=t.playerCallbacks.end;t.runCallbacks(e)})}},this.runCallbacks=function(e,t){e&&$(e).each(function(e,n){n&&n(t)})},this.unbindEvents=function(){this.eventsBinded=!1,this.raw.off("timeupdate"),this.raw.off("play"),this.raw.off("pause"),this.raw.off("end")},this.remove=function(){$("#vimeo-player-container").empty()},this.getDuration=function(){return this.raw.getDuration()},this.getTime=function(){return this.raw.getCurrentTime()},this.setTime=function(e){var t=this,n=this.raw;this.unbindEvents(),n.setCurrentTime(e).then(function(){n.pause().then(function(){t.bindEvents()})})}},VZAAR_DEBUG_PROGRESS=!1,VzaarPlayer=function(e){this.trackeable=!0,this.start=function(e){var t=this,n="//player.vzaar.com/libs/flashtakt/client.js";t.$vzaarContainer=$(".js-vzaar"),t.playerCallbacks={},t.quarters=[25,50,75,100],"undefined"==typeof vzPlayer?injectScript(n,{},function(){t.embed(e)}):t.embed(e)},this.handleOldPlayers=function(e){removeScript(e),window.Froogaloop=window.$f=vzPlayer=void 0},this.embed=function(t){var n=this,i=$("#vzaar-player-container"),r=i.data("height"),s=i.data("width"),o="vzvd-"+e.host_key,a={apiOn:!0};e.host_token&&(a.uss_token=e.host_token),a=$.param(a);var l=(new Date).getTime(),u=$("#js-media-player").data("enable-video-watermark")||!1,d=$("#js-media-player").data()&&$("#js-media-player").data().hasOwnProperty("enableFullScreen")?$("#js-media-player").data("enable-full-screen"):!0,c="allowFullScreen mozallowfullscreen webkitAllowFullScreen",h=$('<iframe allowTransparency="true" class="video-player js-vzaar" frameborder="0" width="'+s+'" height="'+r+'" id="'+o+'" name="'+o+'" src="https://view.vzaar.com/'+e.host_key+"/player?"+a+"&timestamp="+l+"&hideFullScreen="+u+'"title="video player" '+(d&&c||"")+'type="text/html" ></iframe>');i.html(h),h.on("load",function(){n.raw=new vzPlayer(o),n.raw.ready(function(){n.getDuration().then(function(e){n.duration=e,n.bindEvents(),t(n.raw)})})})},this.on=function(e,t){var n=this;"play"===e?n.addPlayerEventListener("interaction",function(e){"resume"===e&&t()}):"pause"===e?n.addPlayerEventListener("mediaPaused",function(){n.getTime().then(function(e){e<n.duration&&t()})}):"end"===e?n.addPlayerEventListener("mediaEnded",t):"progresschange"===e?n.addPlayerEventListener("progress",function(e){var i=parseInt(e.replace("percent",""));i>=n.quarters[0]&&t(n.quarters.shift())}):"fullscreenOn"===e?n.addPlayerEventListener("interaction",function(e){"fullscreenon"===e&&t()}):"fullscreenOff"===e&&n.addPlayerEventListener("interaction",function(e){"fullscreenoff"==e&&t()})},this.addPlayerEventListener=function(e,t){this.playerCallbacks[e]=this.playerCallbacks[e]||[],this.playerCallbacks[e].push(t)},this.bindEvents=function(){var e=this,t=e.raw;e.playerStateBinded||(e.playerStateBinded=!0,t.addEventListener("progress",function(t){var n=e.playerCallbacks.progress;e.runCallbacks(n,t)}),t.addEventListener("playState",function(t){var n=e.playerCallbacks[t];VZAAR_DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] VZAAR_PLAYER>> triggered event (playState): "+t),e.runCallbacks(n)}),t.addEventListener("interaction",function(t){var n=e.playerCallbacks.interaction;VZAAR_DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] VZAAR_PLAYER>> triggered event (interaction): "+t),e.runCallbacks(n,t)}))},this.runCallbacks=function(e,t){e&&$(e).each(function(e,n){n&&n(t)})},this.unbindEvents=function(){var e=this.raw;e.removeEventListener("progress"),e.removeEventListener("playState"),e.removeEventListener("interaction")},this.remove=function(){$("#vzaar-player-container").empty()},this.getDuration=function(){var e=$.Deferred();return this.raw.getTotalTime(function(t){e.resolve(t)}),e.promise()},this.getTime=function(){var e=$.Deferred();return this.raw.getTime(function(t){e.resolve(t)}),e.promise()},this.setTime=function(e){var t=this.raw;this.getDuration().then(function(n){n>e&&t.seekTo(e)})}},WebinarPlayer=function(e){this.trackeable=!0,this.start=function(e){var t="https://vjs.zencdn.net/7.6.0/video.js",n=this;this.playerCallbacks={},"undefined"==typeof Webinar?injectScript(t,{},function(){n.bindPlay(e)}):this.bindPlay(e)},this.bindPlay=function(e){var t=this,n=videojs("webinar-js");runFunnelAction("start"),n.on("play",function(){setTimeout(function(){t.captureLead()},6e4)})},this.captureLead=function(e){null!=/webinar/.exec(window.location)&&runFunnelAction("capture")}},WistiaPlayer=function(e){function t(e){var t=jQuery.Deferred();return setTimeout(function(){t.resolve(e)},1),t.promise()}this.trackeable=!0,this.start=function(e){var t="https://fast.wistia.com/assets/external/E-v1.js",n=this;this.playerCallbacks={},this.quarters=[25,50,75,100],"undefined"==typeof Wistia?injectScript(t,{},function(){n.embed(e)}):this.embed(e)},this.embed=function(t){var n=this;this.raw=Wistia.embed(e,{version:"v1",container:"wistia-player-container-"+e,playerPreference:"html5",wmode:"transparent"}),this.raw.ready(function(){n.getDuration().then(function(e){n.duration=e,n.bindEvents(),t(n.raw)})})},this.on=function(e,t){this.playerCallbacks[e]=this.playerCallbacks[e]||[],this.playerCallbacks[e].push(t)},this.bindEvents=function(){if(!this.eventsBinded){this.eventsBinded=!0;var e=this.raw,t=this;e.bind("secondchange",function(e){var n=100*parseFloat(t.percentWatched().toFixed(2));if(n>=t.quarters[0]){var i=t.playerCallbacks.progresschange;n=t.quarters.shift(),t.runCallbacks(i,n)}}),e.on("end",function(){var e=t.playerCallbacks.end;t.runCallbacks(e)}),e.on("play",function(){var e=t.playerCallbacks.play,n=t.raw.secondsWatchedVector();if(t.startAt&&n){for(var i=0;i<=t.startAt-1;i++)n[i]+=2;t.startAt=null}t.runCallbacks(e)}),e.on("pause",function(){t.getTime().then(function(e){if(e<t.duration){var n=t.playerCallbacks.pause;t.runCallbacks(n)}})})}},this.runCallbacks=function(e,t){e&&$(e).each(function(e,n){n&&n(t)})},this.unbindEvents=function(){this.eventsBinded=!1,this.raw.unbind("secondchange").unbind("play").unbind("pause").unbind("end")},this.percentWatched=function(){var e=0;return $.each(this.raw.secondsWatchedVector(),function(t,n){n>0&&e++}),e/Math.floor(this.raw.duration())},this.remove=function(){$("#wistia-player-container-"+e).empty()},this.getDuration=function(){var e=this,t=jQuery.Deferred();return this.raw.ready(function(){t.resolve(e.raw.duration())}),t.promise()},this.getTime=function(){return t(this.raw.time())},this.setTime=function(e){this.startAt=e,this.unbindEvents(),this.raw.time(e),this.bindEventsWhenSeeked(e)},this.bindEventsWhenSeeked=function(e){var t=this;e==this.raw.time()&&"paused"==this.raw.state()?this.bindEvents():setTimeout(function(){t.bindEventsWhenSeeked(e)},300)}},YoutubePlayer=function(e,t){this.trackeable=!0;var n={0:"ended",1:"playing",2:"paused",3:"buffering",5:"loading"};this.start=function(e){var t=this,n="//www.youtube.com/iframe_api";t.playerCallbacks={},t.quarters=[25,50,75,100],"undefined"==typeof YT?injectScript(n,{},function(){setTimeout(function(){t.embed(e)},1e3)}):t.embed(e)},this.embed=function(t){var n=this,i=$("#youtube-player-container"),r=i.data("height"),s=i.data("width");n.raw=new YT.Player("youtube-player-container",{height:r,width:s,videoId:e.host_key,events:{onReady:function(){t(n.raw)},onStateChange:function(e){e.data===YT.PlayerState.PLAYING?n.progressIntervalUpdating=n.startProgressIntervalUpdating():e.data===YT.PlayerState.PAUSED?clearInterval(n.progressIntervalUpdating):e.data===YT.PlayerState.ENDED&&n.setLocalProgressToCompleted()}}})},this.startProgressIntervalUpdating=function(){return setInterval(function(){var e=t.mediaPlayer,n=t.progressTracking,i=e.quarters;null!==e.raw.getIframe().offsetParent?e.getDuration().then(function(t){e.getTime().then(function(e){var r=0;r=100*e/t,r=Math.round(r),r>=i[0]&&(r=i.shift(),n.addLocalProgress(r,e).then(function(){n.dispatchProgressUpdates({force:!0})}))})}):clearInterval(self.progressIntervalUpdating)},1e3)},this.getTime=function(){var e=this,t=jQuery.Deferred();return t.resolve(e.raw.getCurrentTime()),t.promise()},this.getState=function(){var e=jQuery.Deferred();return e.resolve(n[this.raw.getPlayerState()]),e.promise()},this.getDuration=function(){var e=this,t=jQuery.Deferred();return t.resolve(e.raw.getDuration()),t.promise()},this.setTime=function(e){return this.raw.seekTo(e)},this.setLocalProgressToCompleted=function(){this.getTime().then(function(e){t.progressTracking.addLocalProgress(100,e)})}},Sidebar=function(e){function t(e,t){return{item:$(t),requirements:$(t).data("requirements")}}function n(e,n,i){if(!n.parent().hasClass("expanded")&&(1!==n.size()||n.hasClass("blocked"))){var r=n.map(t).toArray(),s=_.find(r,{requirements:[{content_id:e}]}),o=$("<i />",{"class":"icon-lock"});return!s||Array.isArray(s)&&0===Object.keys(s).length?!1:void(i?(s.item.find(".right > .icon-lock").remove(),s.item.removeClass("blocked"),$(".btn-next-lesson").removeClass("disabled")):(s.item.addClass("blocked"),0!==s.item.find(".right > .icon-lock").size()||i||s.item.find(".right").append(o),$(".btn-next-lesson").removeClass("disabled")))}}this._init=function(){var t=this;this.lessonId=$("#js-media-player").data("lesson-id"),this.completedCounter=e.find(".js-completed-counter"),this.inProgressCounter=e.find(".js-in-progress-counter"),this.completedBar=e.find(".js-completed-bar"),this.inProgressBar=e.find(".js-in-progress-bar");var n=function(e,n){n.data&&t.unlockNextLesson(n.data.completed)};$(document).on("loaded-children",function(){t.activateLesson()}),$(document).off("lesson-completed",n).on("lesson-completed",n)},this.activateLesson=function(){var e=$(".js-edools-player").data("media"),t=!!e&&["Audio","Video","VideoSlide","ScormPackage"].indexOf(e.type)>-1,n=this;return this.setLessonActivatedElements(),$(".js-content, .js-lesson").removeClass("active"),this.$lesson.addClass("active"),this.$lesson.parent(".js-content").addClass("active"),this.$icons.completed.hasClass("hide")&&this.$icons.inProgress.hasClass("hide")?(this.evaluateProgress(this.$progressIcons,e&&!t),void $(document).trigger("activated-lesson")):(n.unlockNextLesson(!this.$icons.completed.hasClass("hide")),!1)},this.reloadProgress=function(e,t){var n=e.lessons_info.completed,i=e.lessons_info.in_progress,r=e.lessons_info.total,s=100*n.length/r+"%",o=100*i.length/r+"%";this.setLessonActivatedElements(),this.completedCounter.html(n.length),this.inProgressCounter.html(i.length),this.completedBar.css("width",s),this.inProgressBar.css("width",o),this.evaluateProgress(this.$progressIcons,t.completed)},this.evaluateProgress=function(e,t){var n=this,i=this.statusIcons(e);this.setLessonActivatedElements(),n.unlockNextLesson(t),t?(i.completed.removeClass("hide"),i.inProgress.addClass("hide")):(i.completed.addClass("hide"),i.inProgress.removeClass("hide"))},this.reloadAttendance=function(e,t){var n=$(".js-lesson[data-lesson-id="+t.lesson_id+"] .js-attendance");n.html(t.views+"/"+e.max_attendance_length)},this.statusIcons=function(e){return{completed:e.find(".js-completed-icon"),inProgress:e.find(".js-in-progress-icon")}},this.setLessonActivatedElements=function(){this.$lesson=$(".js-lesson[data-lesson-id="+this.lessonId+"]"),this.$progressIcons=this.$lesson.find(".js-progress-icons"),this.$icons=this.statusIcons(this.$progressIcons)},this.unlockNextLesson=function(e){this.setLessonActivatedElements();var t=this.$lesson.parent(),i=this.$lesson.parents(".expanded").next(".module").first(),r=t.siblings(),s=t.nextAll(".lesson").size(),o=this.lessonId,a=new MutationObserver(function(t){t.forEach(function(t){var i=$(t.target.querySelectorAll(".lesson")),r=$(t.target.querySelector(".module"));return r.hasClass("expanded")?!1:void(0!==i.size()||r.hasClass("expanded")?n(o,i,e):r.trigger("click"))})});if(e&&s>0&&n(o,r,e),e&&0===s&&i.hasClass("expanded")&&i.find(".lesson").size()>0&&n(o,i.find(".lesson"),e),e&&0===s&&i.hasClass("expanded")&&i.find(".module").size()>0){var l=i.find(".module").first();if(0===l.size())return void a.disconnect();0===l.find(".lesson").size()&&(a.observe(l.get(0),{subtree:!0,childList:!0}),l.trigger("click"))}if(e&&0===s&&!i.hasClass("expanded")){if(0===i.size())return a.disconnect(),!1;a.observe(i.get(0),{subtree:!0,childList:!0}),i.trigger("click")}},this._init()},DEBUG_ATTENDANCE=!1,AttendanceTracking=function(e){var t=.1;this._init=function(){this.type=e.enrollment.max_attendance_type,this.player=e,this.handler=new AttendanceHandler(this),"time"==this.type?this.attempts=e.progress.time_spent||e.enrollment.time_spent:this.attempts=e.progress.views||e.enrollment.lessons_views},this._init(),this.maxAttendanceReached=function(){var t=e.enrollment.max_attendance_type;if("indeterminate"!==t){var n=new Date,i=new Date(e.progress.last_view_at),r=i.setHours(0,0,0,0)==n.setHours(0,0,0,0),s=this.player.enrollment.max_attendance_length;if(this.attempts>=s)return"time"==this.type?!0:r}return!1},this.track=function(){var e=["Video","Audio","VideoSlide"],t=this.player.media.type;this.player.trackeable&&this.player.mediaPlayer.trackeable&&e.indexOf(t)>=0?"time"==this.type?(this.player.on("play",this.startCounter.bind(this)),this.player.on("pause",this.stopCounter.bind(this)),this.player.on("end",this.stopCounter.bind(this))):this.player.on("play",this.trackViews.bind(this)):this.player.trackeable&&this.trackViews()},this.startCounter=function(){if(!this.counter){var e=this;this.player.getDuration().then(function(n){var i=n*t,r=1e3*i;e.counter=window.setInterval(function(){e.updateLessonProgress({time_spent:i}).success(function(t){e.attempts+=i,e.player.progress.time_spent+=i,e.player.progress.time_spent>=n&&e.stopCounter(),e.maxAttendanceReached()&&(e.stopCounter(),e.handleMaxAttendance()),DEBUG_ATTENDANCE&&console.log("["+getCurrentTime()+"] ATTENDANCE.JS>> time_spent updated! ("+i+")")})},r),$(document).on("page:before-change",function(){e.stopCounter()}),DEBUG_ATTENDANCE&&console.log("["+getCurrentTime()+"] ATTENDANCE.JS>> starting counter ("+e.counter+")")})}},this.stopCounter=function(){DEBUG_ATTENDANCE&&console.log("["+getCurrentTime()+"] ATTENDANCE.JS>> stoping counter ("+this.counter+")"),clearInterval(this.counter),this.counter=null},this.trackViews=function(){this.viewAlreadyTracked||(this.maxAttendanceReached()?this.handleMaxAttendance():this.updateLessonProgress({views:1}),"ScormPackage"!==this.player.media.type&&(this.viewAlreadyTracked=!0))},this.updateLessonProgress=function(t){var n=$.ajax({method:"PATCH",url:window.CORE_HOST+"/analytics/lessons_progresses/"+this.player.progress.id,headers:{Authorization:"Token token="+e.apiKey},data:JSON.stringify({lesson_progress:t}),contentType:"application/json"});return n.success(function(t){e.progress=t,e.reloadAttendanceView()}),n.error(function(e){console.log("Something wrong with lesson progress:"),console.log(e)}),n},this.handleMaxAttendance=function(){this.handler.handle()}},DEBUG_PROGRESS=!1,ProgressTracking=function(e){this.init=function(e){var t=["Video","Audio","VideoSlide"];this.mediaType=e.media.type,this.mediaTrackeable=t.indexOf(this.mediaType)>=0,this.trackIntervalId=null,this.progressCompleted=e.progress.completed,e.trackeable&&(this.shouldTrack()?this.track():this.progressCompleted||this.setProgress(100),this.loadAndTrackTime())},this.shouldTrack=function(){var t=e.progress.completed,n=e.mediaPlayer.trackeable,i="ScormPackage"==e.media.type;return i?n:n&&!t},this.track=function(){var t=this;this.mediaTrackeable?e.on("progresschange",function(e){DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] PROGRESS.JS>> percentage received: "+e);var n=100==e?0:void 0;t.addLocalProgress(e,n).then(function(){-1!=[0,25,50,75,100].indexOf(e)&&t.dispatchProgressUpdates({stopMonitor:!0,restartMonitor:100!=e})})}):"ScormPackage"===t.mediaType&&t.getScormResult(function(n,i){var r;n?(r=100,t.setProgress(r,0,e.mediaPlayer.externalId)):(r=i.success?100:i.progress,t.setProgress(r,i.grade,e.mediaPlayer.externalId))})},this.loadAndTrackTime=function(){var t=this;e.getDuration().then(function(e){t.totalTime=e,t.loadTime(),t.trackTime()})},this.loadTime=function(){var t,n=this.getLocalProgress("current_progress"),i=parseInt(n.current_video_time),r=e.progress.current_video_time;i&&r?t=i>r?i:r:(i||r)&&(t=i||r),t&&t>0&&t!=parseInt(this.totalTime)&&e.setTime(t)},this.trackTime=function(){var t=this;this.mediaTrackeable&&(e.on("play",function(){t.finished=!1,t.startMonitor()}),e.on("pause",function(){t.stopMonitor()}),e.on("end",function(){t.finished=!0,t.stopMonitor(!t.progressCompleted)}))},this.startMonitor=function(){if(!this.trackTimeInterval){this.stopingMonitor=!1;var e=this,t=5e3,n=t,i=100*this.totalTime;e.trackTimeInterval=setInterval(function(){DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] PROGRESS.JS>> time tracker: saving LOCAL"),e.addLocalProgress(null).then(function(){n>=i?(DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] PROGRESS.JS>> time tracker: saving REMOTE"),n=t,e.dispatchProgressUpdates({force:!0})):n+=t}),e.finished&&e.stopMonitor(!0)},t),$(document).on("page:before-change",function(){e.stopMonitor(!0)}),DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] PROGRESS.JS>> starting time tracker ("+e.trackTimeInterval+") with remote request per miliseconds: "+i)}},this.stopMonitor=function(e){if((!this.stopingMonitor||this.trackTimeInterval)&&(DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] PROGRESS.JS>> stoping time tracker ("+this.trackTimeInterval+")"),window.clearInterval(this.trackTimeInterval),this.trackTimeInterval=null,this.stopingMonitor=!0,!e)){var t=this,n=this.progressCompleted&&this.finished?0:void 0;this.addLocalProgress(null,n).then(function(){t.dispatchProgressUpdates({force:!0})})}},this.addLocalProgress=function(t,n){var i=e.progress,r=this.getLocalProgressArray(),s=e.getTime(),o=t||this.getLocalProgress().progress;return s.then(function(e){e=void 0!=n?n:e;var t={lesson_progress_id:i.id,progress:o,current_video_time:e};r.push(t),localStorage.setItem("progress",JSON.stringify(r)),localStorage.setItem("current_progress",JSON.stringify([t]))}),s},this.dispatchProgressUpdates=function(t){var n=this,i=this.getLocalProgress();return void 0===t&&(t={}),i&&(i.progress>e.progress.progress||t.force)?this.setProgress(i.progress,void 0,void 0,i.current_video_time).then(function(e){DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] PROGRESS.JS>> progress successfully updated to: "+JSON.stringify(e)),e.completed&&(n.progressCompleted=!0),t.stopMonitor&&(n.stopMonitor(!0),t.restartMonitor&&n.startMonitor()),n.clearLocalProgress(i.progress)})["catch"](function(){t.stopRetry||n.delayDispatchProgressUpdates()}):void 0},this.delayDispatchProgressUpdates=function(){var e=this;e.trackIntervalId=setTimeout(function(){e.dispatchProgressUpdates({stopRetry:!0})},5e3)},this.setProgress=function(t,n,i,r){var s={};return void 0!==t&&t>e.progress.progress&&(s.progress=t,s.completed=100===t),void 0!==n&&(s.grade=n),void 0!==i&&(s.external_id=i),void 0!==r&&(s.current_video_time=r),DEBUG_PROGRESS&&console.log("["+getCurrentTime()+"] PROGRESS.JS>> dispatching received progress: "+JSON.stringify(s)),new Promise(function(t,n){if(!Object.keys(s).length)return e.reloadProgressView(),console.log("Empty lesson progress"),void n();s.completed&&e.setCompletedIcon(),s.lesson_id||(s.lesson_id=e.progress.lesson_id);var i=$.ajax({method:"PATCH",url:window.CORE_HOST+"/lessons_progresses/"+e.progress.id+"?limit=2",headers:{Authorization:"Token token="+e.apiKey},data:JSON.stringify({lesson_progress:s}),contentType:"application/json"});i.success(function(){if(s.completed){var n=e.enrollment.lessons_info.in_progress,i=e.enrollment.lessons_info.completed;newLessonProgress=Object.assign({enrollment_id:e.enrollment.id},e.progress,s),e.enrollment.lessons_info.in_progress=jQuery.grep(n,function(e){return e!=s.lesson_id}),$(document).trigger("lesson-completed",{data:newLessonProgress}),s.lesson_id&&-1==i.indexOf(s.lesson_id)&&i.push(s.lesson_id),$(".js-edools-player").data("lesson-progress",newLessonProgress),setTimeout(function(){e.reloadProgressView()}),e.progress.progress=s.progress,e.progress.completed=s.completed,e.progress.current_video_time=s.current_video_time}t(s)}),i.error(function(t){e.reloadProgressView(),console.log("Something wrong with lesson progress: "),console.log(t),n()})})},this.getLocalProgress=function(e){var t=this.getLocalProgressArray(e);return t.length>0?t[t.length-1]:{}},this.getLocalProgressArray=function(t){var n=e.progress;if(t=localStorage.getItem(t||"progress")){var i=JSON.parse(t);return i.filter(function(e){return e.lesson_progress_id==n.id})}return[]},this.clearLocalProgress=function(t,n){var i=e.progress,r=this.getLocalProgressArray().filter(function(e){return e.lesson_progress_id!=i.id||e.progress>t});localStorage.setItem(n||"progress",JSON.stringify(r))},this.getScormResult=function(t){var n=$.ajax({method:"GET",url:window.CORE_HOST+"/media/"+e.media.id+"/get_scorm_result",headers:{Authorization:"Token token="+e.apiKey},data:{enrollment_id:e.enrollment.id},contentType:"application/json"});n.success(function(e){t(null,e)}),n.error(function(e){t(e,null)})},this.init(e)},ProgressSaver=function(e){this.init=function(e){var t=e.media.type,n=["Video","Audio","VideoSlide"];if(e.progress&&n.indexOf(t)>=0){var i=this;this.local_current_time_id="edools_progress_"+e.progress.id+"_time",this.loadTime(),e.on&&(e.on("play",function(){i.monitor()}),e.on("pause",function(){i.stop(),e.getTime().then(function(e){i.saveTime(e)})}),e.on("end",function(){i.saveTime(0),i.stop()}))}},this.monitor=function(){var e=this;this.localInterval=setInterval(function(){e.updateLocal()},5e3)},this.stop=function(){clearInterval(this.localInterval),clearInterval(this.remoteInterval)},this.updateLocal=function(t){e.getTime().then(function(e){t=t||e,localStorage.setItem(this.local_current_time_id,t)})},this.updateRemote=function(t){e.getTime().then(function(n){if(e.progress&&e.progress.id){t=t||n;var i=$.ajax({method:"PATCH",url:window.CORE_HOST+"/lessons_progresses/"+e.progress.id,headers:{Authorization:"Token token="+e.apiKey},data:JSON.stringify({lesson_progress:{current_video_time:t}}),contentType:"application/json"});i.error(function(e){console.log("Someting is wrong with current_video_time update:"),console.log(e)})}})},this.getLocalTime=function(){return localStorage.getItem(this.local_current_time_id)},this.getRemoteTime=function(){return e.progress.current_video_time},this.loadTime=function(){var t,n,i;n=this.getLocalTime(),i=this.getRemoteTime(),n&&i?t=n>i?n:i:(n||i)&&(t=n||i),t&&t>0&&e.setTime(t)},this.saveTime=function(t){e.progress&&e.progress.id&&(this.updateLocal(t),this.updateRemote(t))},this.init(e)};window.VideoWaterMarkIntervals=[];var VideoWaterMark=function(e){var t=this;return t.container=$("#js-media-player"),t.user=$("[data-user]").data("user"),t.config=t.container.data("video-watermark-config")||{},t.colors=["red","green","blue","black","white"],t.videoPlayerContainer=$(".js-video-player"),t.isFullscreen=!1,t.init=function(e){"undefined"!==e&&(e.on("play",function(){t.start()}),e.on("pause",function(){t.stop()}),e.on("end",function(){t.stop()}),e.on("fullscreenOn",function(){t.isFullscreen=!0}),e.on("fullscreenOff",function(){t.isFullscreen=!1}))},t.enabled=function(){return t.container.data("enable-video-watermark")},t.start=function(){var e=t.config.interval||15e3;if(t.enabled()){var n=setInterval(function(){var e=t.build();setTimeout(function(){e.remove()},1500)},e);window.VideoWaterMarkIntervals.push(n)}},t.stop=function(){t.enabled()&&($("[data-cright]").remove(),window.VideoWaterMarkIntervals.forEach(function(e){clearInterval(e)}))},t.generateId=function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=8,n="",i=0;t>i;i++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},t.random=function(e,t){return t||(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},t.buildUserInfo=function(e){var e=t.config.infos||["name","email","cpf"];if(e=_.map(e,function(e){return t.user[e]}),1==e.length)return e[0];var n=e[this.random(0,2)],i=e[this.random(0,2)];return n===i?n:n+" "+i},t.build=function(){var e=t.generateId(),n=t.config.size||16,i=t.colors[t.random(0,4)],r=t.buildUserInfo(),s=$(".js-edools-player"),o=$("#"+e),a=$("[data-cright]"),l=t.isFullscreen?$(window).width():s.width(),u=t.isFullscreen?$(window).height():s.height(),d=t.random(30,u-30),c=t.random(30,l-30);1===o.size()&&(o.remove(),e=t.generateId()),a.length>0&&a.remove();var h="display: inline-block;z-index: "+(t.isFullscreen?"2147483647;":"1000")+";top:"+d+"px;font-size: "+n+"px;font-weight:bold;color:"+i+";left:"+c+"px;opacity: 0.3;visibility: hidden;position:"+(t.isFullscreen?"fixed":"absolute")+";",p=$('<div data-cright="'+e+'" id="'+e+'" style="'+h+'">'+r+"</div>");s.append(p);var f=p.width(),m=p.height();return c+f>l&&p.css("left",l-f-30),d+m>u&&p.css("top",u-m-50),p.css("visibility","visible"),p},t.videoPlayerContainer.length<=0||!t.user||t.enabled()!==!0?void t.stop():($(document).on("ready page:load",function(){t.stop()}),t.stop(),void t.init(e))},buildLazyLoadUrl=function(e,t,n){return("/enrollments/:enrollment_id/courses/:course_id/"+n).replace(":enrollment_id",e).replace(":course_id",t)},getPaymentMethod=function(e,t,n){if(null===t||null===e)return!1;console.warn("executed: core.getPaymentMethod");var i=$.ajax({url:buildLazyLoadUrl(e,t,"payment_method"),async:!1,headers:{Authorization:"Token token="+n}});return i&&i.responseJSON&&i.responseJSON.payment_method||null},getLessonsInfo=function(e,t,n){if(null===t||null===e)return!1;console.warn("executed: core.getLessonsInfo");var i=$.ajax({url:buildLazyLoadUrl(e,t,"lessons_info"),async:!1,headers:{Authorization:"Token token="+n}});return i&&i.responseJSON&&i.responseJSON.lessons_info||null};Turbolinks.pagesCached(0);var OVERRIDE_INIT_LESSON_LIST_SKIP=["http://www.matematicaresolvida.com","https://matematicaresolvida.myedools.com","https://aprimore.myedools.com","https://www.fashionteen.com.br","https://uber.myedools.com","https://loja.lecnews.com","https://novo.solloagro.com.br","https://solloagro-testes.myedools.com","https://plataforma.solloagro.com.br","https://plataforma.eadesalq.com.br","https://eadesalq.myedools.com"],OVERRIDE_CHECK_TRIAL_ENROLLMENT=["http://www.supremotv.com.br","https://www.fashionteen.com.br","http://www.matematicaresolvida.com","https://matematicaresolvida.myedools.com","https://aprimore.myedools.com","https://uber.myedools.com","https://loja.lecnews.com","https://solloagro-testes.myedools.com","https://plataforma.solloagro.com.br","https://plataforma.eadesalq.com.br","https://eadesalq.myedools.com"];$(function(){-1===OVERRIDE_INIT_LESSON_LIST_SKIP.indexOf(window.location.origin)&&window.app&&window.app.lessonList&&overrideInitLessonList(window.app.lessonList),$(document).on("click","a[datturbolinks-scroll], a[data-turbolinks-scroll]",function(e){e.preventDefault();var t=$(this),n=t.attr("href"),i=t.data("turbolinks-scroll");Turbolinks.visit(n,{scroll:i})}),$(document).ajaxSuccess(function(e,t,n,i){if("/exam_answers"==n.url&&200==t.status){var r=$("#js-media-player").data("lesson-id");$(".icon-check.js-completed-icon","#lesson-"+r).removeClass("hide"),$(".icon-clock.js-in-progress-icon","#lesson-"+r).addClass("hide")}})}),$(document).on("ready page:load",function(e){$("form[method=get]").on("submit",function(e){e.preventDefault();var t=$(this),n=t.serialize().replace(/[^&]+=\.?(?:&|$)/g,""),i=t.attr("action"),r="false"!=t.attr("data-turbolinks-scroll");""!=n&&(i=i+"?"+n),Turbolinks.visit(i,{
scroll:r})}),$("form[method=post]").on("submit",function(e){$(this).find("input[type=submit]").attr("disabled","disabled")}),"function"==typeof _edools_ga&&(_edools_ga("set","location",location.pathname+location.search),_edools_ga("send","pageview")),loadPlayers(),loadCep(),loadMathjax(),-1===OVERRIDE_CHECK_TRIAL_ENROLLMENT.indexOf(window.location.origin)&&setTimeout(function(){window.app&&window.app.lessonList&&checkTrialEnrollment(window.app.lessonList)})});var loadPlayers=function(){var e,t,n=$(".js-edools-player"),i=$($(".js-lesson-sidebar, .js-progress").get(0)),r=[];i.length>0?(e=new Sidebar(i),e.activateLesson()):e=null,n.length>0&&$.each(n,function(n,i){var s=new EdoolsPlayer($(i),e);s.init(),r.push(s),s.trackeable&&(t=s)}),window.sidebar=e,window.currentPlayer=t,window.players=r},checkTrialEnrollment=function(e){var t,n=e.course&&e.course.id,i=e.enrollment&&e.enrollment.id,r=e.apiKey,s=function(e,t){return"/enrollments/:enrollment_id/courses/:course_id/on_trial".replace(":enrollment_id",e).replace(":course_id",t)};e.onTrial={},e.checkTrialByType=function(o,a){var l=this,u=$("#js-course-tree-ajax");if(0===u.size())return!1;console.warn("executed: core.checkTrialByType");var d=u.data("enrollment"),c=u.data("course"),h=u.data("school-product"),p="trial_"+o+"_ids";n=n||c&&c.id,i=i||d&&d.id,r=e.apiKey||u.data("api-key"),t=void 0!==t?t:getPaymentMethod(i,n,r);var f=h&&h.trial_constrains,m=f&&t&&f[t]||{},v=Object.keys(m).length>0,y=function(e){return-1===[void 0,null].indexOf(e)};if(y(i)&&y(n)&&!l.onTrial.hasOwnProperty(i)){var g=$.ajax({url:s(i,n),async:!1,headers:{Authorization:"Token token="+r}});l.onTrial[i]=g&&g.responseJSON&&g.responseJSON.on_trial}return v&&!m.hasOwnProperty(p)?!1:v&&m[p]?m[p].indexOf(a)>-1:d&&l.onTrial[i]?!1:!1}},overrideInitLessonList=function(e){e.courseTree||(e.courseTree=function(){return $(".course-content #js-course-tree-ajax")}),e.lessonProgress||(e.lessonProgress=function(){return $("#js-media-player").data("lesson-progress")}),e.init=function(){var e=this;if(console.warn("executed: core.lessonList.init"),e.courseTreeExists=e.courseTree().length,e.isActive=e.courseTree().data("is-active"),e.course=e.courseTree().data("course"),e.enrollment=e.courseTree().data("enrollment"),e.courseContent=e.courseTree().data("course-content"),e.userType=e.courseTree().data("user-type"),e.lessonActions=e.courseTree().data("lesson-actions"),e.downloadAction=e.courseTree().data("download-action"),e.currentLessonId=parseInt(e.courseTree().data("current-lesson-id")),e.apiKey=e.courseTree().data("api-key"),e.translations={},e.translations["lesson.release_at"]=e.courseTree().data("translation-release-at"),e.translations["lesson.release_after"]=e.courseTree().data("translation-release-after"),e.translations["lesson.lock_at"]=e.courseTree().data("translation-lock-at"),e.translations["lesson.lock_after"]=e.courseTree().data("translation-lock-after"),e.translations["product.course_content.views"]=e.courseTree().data("translation-course_content-views"),e.renderAttendanceElement&&$(document).on("activated-lesson",function(){e.renderAttendanceElement()}),e.course&&e.enrollment){var t=getLessonsInfo(e.enrollment.id,e.course.id,e.apiKey);e.courseTree().data("enrollment",Object.assign({},e.enrollment,{lessons_info:t}))}e.lessonProgress()&&e.lessonProgress().completed&&$(".btn-next-lesson").removeClass("disabled"),e.courseTreeExists&&!e.isActive&&(e.bindClicks(),e.handleLessons(),e.loadTopModules(),e.bindChangeLesson(),$(document).trigger("app:bind:lesson_sidebar"),$(document).on("lesson-completed",function(t,n){var i=$(".btn-next-lesson"),r=n.data.enrollment_id;e.progressIcon("completed").hasClass("hide")&&e.progressIcon("completed").removeClass("hide"),e.progressIcon("progress").hasClass("hide")||e.progressIcon("progress").addClass("hide"),i.size()>0&&i.removeClass("disabled"),app.lessonList.requirementsExists(n.data,function(e,t){e&&t&&app.lessonList.checkLessonCompleted(r,t,function(t){t&&(e.removeClass("blocked"),e.find(".right > .icon-lock").remove())})})}))}};